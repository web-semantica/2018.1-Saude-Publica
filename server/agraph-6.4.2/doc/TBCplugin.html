<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="author" content="Franz Incorporated"/>
<title>Top Braid Composer Plugin</title>
<link rel='stylesheet' href='jquery-ui.custom.min.css' />
<link rel='stylesheet' href='stylesheet.css' />
<link rel='stylesheet' href='print.css' media='print' />
<body id="TBCplugin"> <div id="header"> <p>                 </p>                <p><script src="jquery.min.js" type="text/javascript" charset="utf-8"></script> <script src="jquery-ui.custom.min.js" type="text/javascript" charset="utf-8"></script> <script src="activebookmark.js" type="text/javascript" charset="utf-8"></script> </p> <div id='search-form'>   <form method="GET" action="https://www.google.com/search">     <input type="hidden" name="as_sitesearch" value=""> </input>     <input type="text" size="40" name="as_q" value="" placeholder="Please enable JavaScript to use search!"> </input>&nbsp;     <input type="submit" value="Search" disabled> </input>   </form> </div> <script>    /* Docudown has no support for function calls in HTML attributes. 
<ul>
<li>Thus, we set the as_sitesearch attribute using JavaScript below.    */   (function () { 'use strict'; var properValue = "franz.com/agraph/support/documentation/6.4.2/"; var input = document.querySelector(   '#search-form input[name="as_sitesearch"]'); input.setAttribute('value', properValue); /* The submit button was disabled so that search would be 
<ul>
<li>impossible for users without JavaScript. Enabling now: */ document.querySelector('#search-form input[type="submit"]').   removeAttribute('disabled'); document.querySelector('#search-form input[name="as_q"]').   removeAttribute('placeholder');   })(); </script> <div id="copyright">  Copyright (c) 2005 - 2018 Franz, Incorporated</div> <div id="timestamp">  Last updated 8 June 2018 at 06:55</div> <a href="https://franz.com" alt="Franz Inc Home Page"><div id="hdLogo"> </div></a> </li></ul></li></ul>       <h1>Using TopBraid Composer with AllegroGraph 6.4.2</h1></div> <div id="contents">  <div id="docIndex"> <ul id="agmenu"> <li><a href="index.html">Documentation Index</a> 
<ul>
<li><a href="release-notes.html">Release Notes</a></li>
<li><a href="agraph-quick-start.html">Quick Start</a></li>
<li><a href="agraph-introduction.html" id="agraph-introduction-tab">Introduction</a></li>
<li>Setup and Configuration
<ul>
<li><a href="http://franz.com/agraph/downloads/" target="_blank">Download</a></li>
<li><a href="server-installation.html">Server Installation</a></li>
<li><a href="daemon-config.html">Server Configuration and Control</a></li>
<li><a href="agwebview.html">WebView</a></li>
<li><a href="upgrade-guide.html">Database Upgrading</a></li></ul></li>
<li>Server Management
<ul>
<li><a href="performance-tuning.html">Performance Tuning</a></li>
<li><a href="deleting-duplicate-triples.html">Deleting Duplicate Triples</a></li>
<li><a href="purging-deleted-triples.html">Purging Deleted Triples</a></li>
<li><a href="audit.html">Auditing</a></li>
<li><a href="managing-users.html">Managing Users</a></li>
<li><a href="replication.html">Replication</a></li>
<li><a href="point-in-time-recovery.html">Point-in-Time Recovery</a></li>
<li><a href="transaction-log-archiving.html">Transaction Log Archiving</a></li>
<li><a href="security-overview.html">Security Overview</a></li>
<li><a href="security.html">Security Implementation</a></li></ul></li>
<li>Tools
<ul>
<li><a href="agtool.html">agtool</a></li>
<li><a href="agload.html">Data Loading</a></li>
<li><a href="agexport.html">Data Export</a></li>
<li><a href="backup-and-restore.html">Backup and Restore</a></li>
<li><a href="agquery.html">Querying</a></li>
<li><a href="reasoner-tutorial.html" id="reasoner-tutorial-tab">RDFS++</a></li>
<li><a href="materializer.html">Materializer</a></li></ul></li>
<li>Details
<ul>
<li><a href="triple-index.html">AllegroGraph Indices</a></li>
<li><a href="text-index.html">Full-text Indices</a></li>
<li><a href="encoded-ids.html">Encoded IDs</a></li>
<li><a href="connection-pooling.html">Connection Pooling</a></li>
<li><a href="geospatial-nd.html">N-dimensional Geospatial Overview</a></li>
<li><a href="magic-properties.html#sparql-magic-geo-2d">2-D Geospatial</a></li>
<li><a href="magic-properties.html#sparql-magic-temporal">Temporal</a></li>
<li><a href="magic-properties.html#sparql-magic-sna">Social Network</a></li>
<li><a href="javascript.html">JavaScript</a></li>
<li><a href="datatypes.html">Datatypes</a></li>
<li><a href="rapper.html">Data Conversion (Rapper)</a></li>
<li><a href="stored-procedures.html">Stored Procedures</a></li>
<li><a href="triple-attributes.html">Triple Attributes</a></li></ul></li>
<li>Querying
<ul>
<li><a href="sparql-overview.html">SPARQL documentation summary</a></li>
<li><a href="sparql-reference.html">SPARQL Reference</a></li>
<li><a href="spin.html">SPIN</a></li>
<li><a href="magic-properties.html">SPARQL Magic Properties</a></li>
<li><a href="prolog-tutorial.html">Prolog</a></li></ul></li>
<li>3rd-party tools
<ul>
<li><a href="solr-index.html">Solr text Indices</a></li>
<li><a href="mongo-interface.html">MongoDB integration</a></li>
<li><a href="TBCplugin.html">TopBraid Composer Plugin</a></li>
<li><a href="agraph-introduction.html#othertools">Cloudera</a></li></ul></li>
<li>Client APIs
<ul>
<li><a href="http://franz.com/agraph/gruff/" title="Gruff" target="_blank">Gruff</a></li>
<li><a href="http-protocol.html">REST/HTTP interface</a></li>
<li><a href="http-reference.html">HTTP reference</a></li>
<li><a href="javadoc/index.html">Javadocs (Sesame and Jena)</a></li>
<li><a href="python/index.html">Python API</a></li>
<li><a href="lisp-reference.html">Lisp Reference</a></li>
<li><a href="javascript.html">JavaScript</a></li></ul></li>
<li>Tutorials
<ul>
<li><a href="geospatial-nd-tutorial.html">N-dimensional Geospatial</a></li>
<li><a href="sparql-tutorial.html">SPARQL Tutorial</a></li>
<li><a href="java-tutorial/java-tutorial.html">Java Sesame</a></li>
<li><a href="java-tutorial/jena-tutorial.html">Java Jena</a></li>
<li><a href="python/tutorial.html">Python Sesame</a></li>
<li><a href="lisp-quickstart.html">Lisp</a></li>
<li><a href="prolog-tutorial.html">Prolog</a></li>
<li><a href="tutorial-index.html">More...</a></li></ul></li>
<li>Other
<ul>
<li><a href="suggested-reading.html">Suggested Reading</a></li>
<li><a href="http://franz.com/ps/services/conferences_seminars/" title="Conferences and Seminars" target="_blank">Conferences and Seminars</a></li>
<li><a href="http://github.com/franzinc">Source Code on Github</a></li>
<li><a href="http://agraph.franz.com/cresources/index.lhtml" target="_blank">Community Resources</a></li>
<li><a href="http://franz.com/agraph/ec2/">Amazon EC2</a></li>
<li><a href="copyrights.html">Copyrights</a></li>
<li><a href="change-history.html" id="change-history-tab">Change History</a></li></ul></li>
<li><a href="http://franz.com/" target="_blank">Franz, Inc.</a> </li> </ul> </li></ul><p><script> $(function() { $( "#agmenu" ).menu(); }); </script> </p></div>   
<div class='table-of-contents' id='table-of-contents'>

<ul>
<li><a href='#header2-8' title='Introduction'>Introduction</a>
<ul>
<li><a href='#header3-11' title='Installing TopBraid Composer'>Installing TopBraid Composer</a></li>
<li><a href='#header3-16' title='Using the Sesame 2 connector'>Using the Sesame 2 connector</a></li>
<li><a href='#header3-19' title='Connect TBC to AllegroGraph'>Connect TBC to AllegroGraph</a></li>
<li><a href='#header3-42' title='Connecting TBC to the Virtual Server on Windows or Mac'>Connecting TBC to the Virtual Server on Windows or Mac</a></li></ul></li>
<li><a href='#header2-64' title='The AllegroGraph Plugin (for TBC 5.1.4 and earlier)'>The AllegroGraph Plugin (for TBC 5.1.4 and earlier)</a>
<ul>
<li><a href='#header3-67' title='Installing TopBraid Composer (for TBC 5.1.4 and earlier)'>Installing TopBraid Composer (for TBC 5.1.4 and earlier)</a></li>
<li><a href='#header3-72' title='Installing the AllegroGraph Plugin (for TBC 5.1.4 and earlier)'>Installing the AllegroGraph Plugin (for TBC 5.1.4 and earlier)</a></li>
<li><a href='#header3-112' title='Testing the Installation (for TBC 5.1.4 and earlier)'>Testing the Installation (for TBC 5.1.4 and earlier)</a></li>
<li><a href='#header3-146' title='Connecting TBC to the Virtual Server on Windows or Mac (for TBC 5.1.4 and earlier)'>Connecting TBC to the Virtual Server on Windows or Mac (for TBC 5.1.4 and earlier)</a></li>
<li><a href='#header3-164' title='Checking for Updates (for TBC 5.1.4 and earlier)'>Checking for Updates (for TBC 5.1.4 and earlier)</a></li>
<li><a href='#header3-166' title='Removing the AllegroGraph Plugin (for TBC 5.1.4 and earlier)'>Removing the AllegroGraph Plugin (for TBC 5.1.4 and earlier)</a></li></ul></li>
<li><a href='#header2-169' title='Known Issues'>Known Issues</a></li></ul>
<div id='tocLink'><a href='index.html'>Documentation Index</a></div>
</div>
    <div id="main-content"> <a name='header2-8' id='header2-8'></a><h2>Introduction</h2><p>Top-Braid Composer (TBC), a product of TopQuadrant, Inc., is a graphical development environment for modeling data, connecting data sources, and designing queries, rules and semantic data processing chains. </p><p>Starting with TBC release 5.2, AllegroGraph works with TBC using the Sesame 2 connector, which is built into TBC. (There was an AllegroGraph plugin which could be used with versions of TBC up to 5.1.4. However, the plugin does not work with TBC 5.2 and later. The first part of this document describes connecting AllegroGraph and TBC with the Sesame 2 connector. The older plugin method is still described, below in the <a href="#oldplugin">second part</a> of this document.) </p><a name='header3-11' id='header3-11'></a><h3>Installing TopBraid Composer</h3><p>Download TopBraid Composer from the TopQuadrant web site: </p>
<pre><code>http://www.topquadrant.com/downloads/topbraid-composer-install/ </code></pre><p>The TopBraid Composer installation instructions are on that page. </p><p>You may use either the Standard Edition or the Maestro Edition. </p><a name='header3-16' id='header3-16'></a><h3>Using the Sesame 2 connector</h3><p>Start TBC by running <strong>TopBraid Composer.exe</strong>. You should find it in the top-level directory of the files you unzipped. A window like this will open: </p><p><img src="tbc-init-window-1.jpg" alt="TBC window on startup"></img> </p><a name='header3-19' id='header3-19'></a><h3>Connect TBC to AllegroGraph</h3><p>Start AllegroGraph, either on the machine running TBC or on a machine accessible over the network by the machine running TBC. In the example below, we start AllegroGraph on machine <em>crow</em>, listening on port 10035. We have created a new, empty repository named <em>kenn</em>. </p><p>In the navigator pane in the lower left, open the TopBraid folder, right click in the background to display the menu and choose <strong>New | Folder</strong>. You will be asked for the parent folder (<strong>TopBraid</strong>) and the name (<strong>AG4</strong>). When done, the window will look like: </p><p><img src="tbc-init-ag4-2.jpg" alt="New AG4 folder"></img> </p><p>In the same Navigator pane, open the <strong>Examples</strong> subfolder of <strong>TopBraid</strong> and select <em>kennedy.ttl</em>, a file of data about the Kennedy family in Turtle format. </p><p><img src="tbc-ex-kenn-3.jpg" alt="The kennedy.ttl Example"></img> </p><p>Double click on that file and various other fields of the TBC window will populate: </p><p><img src="tbc-ex-kenn-open-4.jpg" alt="The kennedy.ttl Example Loaded"></img> </p><p>The next step is to export <em>kennedy.ttl</em> into AllegroGraph database. In the <em>Navigator Pane</em>, right-click the <em>TopBraid/AG4</em> node, and select <em>Export</em> from the context menu. In the <em>Export</em> dialog box, open the <em>TopBraid Composer</em> node and select <em>Export/Merge/Convert RDF Graphs</em>. Click <em>Next</em>. </p><p><img src="tbc-export-5.jpg" alt="The Export Dialog Box"></img> </p><p>The Export/Merge/Convert RDF Graphs dialog will appear. In the <strong>Export into format</strong> field, choose <em>*Sesame2 Remote Repository (</em>s2r)<em>* from the drop-down list. Choose a file name ('kennedy' in the illustration). Make sure the checkbox next to the </em>http://topbraid.org/examples/kennedys* is checked, then Click <em>Next</em>. </p><p><img src="tbc-export-rdf-6.jpg" alt="The Export into Format Dialog Box"></img> </p><p>That action brings up a dialog allowing you to specify the connection to the running AllegroGraph server, similar to the following: </p><p><img src="tbc-ag-connect-7.jpg" alt="Connecting to AllegroGraph"></img> </p><p>The <em>Service URL</em> specifies the machine and port of the AllegroGraph server. In this example (which was created with TBC running on Windows) the machine is <em>crow</em> and the port is 10035 (the port value used in a default AllegroGraph install). If you were running TBC on the same (Linux) machine as the AllegroGraph server, you could specify <em>http://localhost:10035</em>. </p><p>The <em>Graph name</em> specifies the graph to use for triples. Leaving it blank (as we have done) specifies the root graph. </p><p>The <em>User Name</em> and <em>Password</em> are for the AllegroGraph login. The user and the password must have been already set up in AllegroGraph. The <em>test</em> user is the default initial superuser in an AllegroGraph installation. The password (unreadable in the image but 'xyzzy') is the default password for user <em>test</em> in an AllegroGraph installation. Because user <em>test</em> is a superuser, there is no issue about permissions. If you specify a non-superuser, be sure that user has appropriate permissions for whatever you wish to do. </p><p>Once those fields have been entered correctly, clicking on <em>Fetch Repositories</em> will display the available repos. We have chosen one we created named <em>kenn</em>. </p><p>Then click <em>Finish</em>. If all goes well, a confirming dialog will appear: </p><p><img src="tbc-ag-confirm-8.jpg" alt="Confirming the Data was Sent to AllegroGraph"></img> </p><h4>SPARQL and Prolog Queries</h4><p>Open TopBraid's SPARQL editor pane (look for the SPARQL tab at the bottom right of the TBC window -- where the orange arrows are in the illustration which shows the SPARQL tab already selected).  It contains a default SPARQL query that searches for rdfs:subClassOf triples.  The SPARQL window has three buttons that let you run a query with or without locally-configured inferencing. Click the green "Run" button to run this query (we have done this already to produce the illustration).  After a few seconds you will see a table of ?subject and ?object values returned from the triple store. </p><p><img src="tbc-ag-sparql-run-12.jpg" alt="SPARQL View"></img> </p><a name='header3-42' id='header3-42'></a><h3>Connecting TBC to the Virtual Server on Windows or Mac</h3><p>AllegroGraph runs on 64-bit (x86-64) Linux.  Windows and Mac users can simulate a 64-bit Linux environment using the <strong>AllegroGraph Virtual Machine</strong>, which can be downloaded from the <a href="http://franz.com/agraph/downloads/" target="_blank">AllegroGraph Download</a> page. The virtual machine has AllegroGraph pre-installed on port 10035.  TopBraid Composer can be connected to the virtual machine for experiments where performance is not critical. </p><p>Both the virtual server and TopBraid can be installed on the same computer, if desired, or TopBraid can connect to the virtual machine from another computer across a network. </p><p><a name="vm-use"></a> </p><h4>TBC and VM on the Same Computer</h4><p>To connect TopBraid Composer to a virtual AllegroGraph server, with both running on the same physical computer, all you need is the IP address of the virtual machine. This IP address is usually assigned when the virtual machine comes on line, and may change from session to session. To discover the current IP address in the AllegroGraph 6.1.3 or newer VM, open a terminal window and run the script <em>~/franz/ipaddr.sh</em>. That will report the current IP address of the VM. </p><p>If you are running an older AllegroGraph VM, open a terminal window in the virtual machine and type the <em>ifconfig</em> command.  (Note: ifconfig, not ipconfig.) The server's IP address is in the second line of the response. </p><p><img src="tbc_virtual.jpg" alt="Vitural Machine"></img> </p><p>Use this IP address and the AllegroGraph port number (10035) when you connect TopBraid Composer to the virtual AllegroGraph server. </p><h4>Connect TBC to the VM on a Local Network</h4><p>The AllegroGraph Virtual Machine's network adaptor is set to Network Address Translation (NAT) by default.  This setting makes it easy to connect TBC to the VM when both are on the same host computer. If you have TBC and the VM running on separate computers, you might encounter difficulty making the connection. </p><p>To connect to a virtual AllegroGraph server on a network computer, you will have to reconfigure the virtual machine's network adaptor. Open the VM menu &gt; Settings... &gt; Network Adaptor dialog box. The objective is to turn off NAT and enable "bridging" instead. </p><p><strong>Enabling bridged networking on VMware Workstation</strong> </p><p>Select "Bridged: Connect directly to the physical network." Check the option that says "Replicate the physical network connectivity state." </p><p><img src="tbc_bridge1.jpg" alt="Network Settings"></img> </p><p><strong>Enabling bridged networking on VMware Fusion</strong> </p><p>Select "Connect directly to the physical network (Bridged)." Select "Autodetect." </p><p><img src="tbc_bridge2.jpg" alt="Network Settings"></img> </p><p><strong>After enabling bridged networking</strong> </p><p>Close the dialog box and reboot the virtual machine. Run the script <em>~/franz/ipaddr.sh</em> in a terminal (or run <em>ifconfig</em> if you have an older VM -- see <a href="#vm-use">above</a> for details) to get the new IP address. This address (using port 10035) will connect across the network. </p><p>If there are further issues, see the <a href="http://www.vmware.com/support/pubs/" class="external" target="_blank">VMware documentation.</a> </p><p><a name="oldplugin"></a> </p><a name='header2-64' id='header2-64'></a><h2>The AllegroGraph Plugin (for TBC 5.1.4 and earlier)</h2><p>Until TBC release 5.2, the AllegroGraph TopBraid Composer Plugin let the TBC user connect to an AllegroGraph server, load data into an AllegroGraph triple store, and execute SPARQL queries against the triple store. If the user has the proper AllegroGraph privileges, it is also possible to issue Prolog queries and to use the RDFS++ inference. </p><p>The plugin is not supported for TBC 5.2 and later. This part of this document is for users who have versions of TBC up to 5.1.4. </p><a name='header3-67' id='header3-67'></a><h3>Installing TopBraid Composer (for TBC 5.1.4 and earlier)</h3><p>Download TopBraid Composer from the TopQuadrant web site: </p>
<pre><code>http://www.topquadrant.com/downloads/topbraid-composer-install/ </code></pre><p>The TopBraid Composer installation instructions are on that page. </p><p>You may use either the Standard Edition or the Maestro Edition. </p><a name='header3-72' id='header3-72'></a><h3>Installing the AllegroGraph Plugin (for TBC 5.1.4 and earlier)</h3><p>Run <strong>TopBraid Composer.exe</strong>. You should find it in the top-level directory of the files you unzipped. </p><p>In the TopBraid interface, open the <strong>Help</strong> menu and select <strong>Install new software...</strong> This opens the <strong>Available Software</strong> dialog. </p><p><img src="tbc_available.jpg" alt="Available Software Dialog"></img> </p><p>Click the <strong>Add...</strong> button in the upper right corner. This opens the <strong>Add Site</strong> dialog box.<br />
</p><p><img src="tbc_addsite.jpg" alt="Add Site Dialog"></img> </p><p>Type "AllegroGraph Plugin" into the <strong>Name</strong> field, and paste the AllegroGraph Plugin URL into the <strong>Location</strong> field.<br />
</p><p>For TBC 5.1.4 release (tested on 5.1.4) </p>
<pre><code> http://www.franz.com/ftp/pub/agraph/eclipse/tbc/5.1.4 </code></pre><p>TBC releases after 5.0.x and before 5.1.4 have not been tested. </p><p>For TBC 5.0.1 release and 5.0.x releases for x equal 1 or larger (tested on 5.0.1) </p>
<pre><code> http://www.franz.com/ftp/pub/agraph/eclipse/tbc/5.0.1 </code></pre><p>For TBC 5.0 release (unsupported because of software issues, see TBC 5.0.1) </p><p>For TBC 4.6.x releases (tested on 4.6), the appropriate URL is: </p>
<pre><code> http://www.franz.com/ftp/pub/agraph/eclipse/tbc/4.6 </code></pre><p>For TBC 4.5.x releases (tested on 4.5), the appropriate URL is: </p>
<pre><code> http://www.franz.com/ftp/pub/agraph/eclipse/tbc/4.5  
</code></pre><p>For TBC 4.4.x releases (tested on 4.4 and 4.4.1), the appropriate URL is: </p>
<pre><code> http://www.franz.com/ftp/pub/agraph/eclipse/tbc/4.4 </code></pre><p>For TBC 4.3.x releases (tested on 4.3.0), the appropriate URL is: </p>
<pre><code> http://franz.com/ftp/pub/agraph/eclipse/tbc/4.3 </code></pre><p>For TBC 4.2.x releases (tested on 4.2.0 and 4.2.1), the appropriate URL is: </p>
<pre><code> http://franz.com/ftp/pub/agraph/eclipse/tbc/4.2 </code></pre><p>For TBC 4.1.x releases (tested on 4.1.0), the appropriate URL is: </p>
<pre><code> http://franz.com/ftp/pub/agraph/eclipse/tbc/4.1 </code></pre><p>For TBC 4.0.x releases (tested on 4.0.0), the appropriate URL is: </p>
<pre><code> http://franz.com/ftp/pub/agraph/eclipse/tbc/4.0 </code></pre><p>For TBC 3.6.0 and 3.6.1 releases, the appropriate URL is: </p>
<pre><code>http://franz.com/ftp/pub/agraph/eclipse/tbc/3.6 </code></pre><p><strong>Note</strong>: the TBC 3.6.2 release was discontinued by Top Quadrant, and the AG plugins are not available for that release (please use the TBC 4 or 3.6.1 release instead). </p><p>For TBC 3.5.x releases, the appropriate URL is: </p>
<pre><code>http://franz.com/ftp/pub/agraph/eclipse/tbc/3.5 </code></pre><p>and for TBC 3.4.x or TBC 3.3.x releases, the URL is: </p>
<pre><code>http://franz.com/ftp/pub/agraph/eclipse/tbc/plugins </code></pre><p>Versions prior to TBC 3.3 are not supported. </p><p>Click the <strong>OK</strong> button to close the Add Site dialog. This returns focus to the Available Software dialog. </p><p><img src="tbc_available2.jpg" alt="Available Software Dialog"></img> </p><p>On the Available Software dialog, uncheck the <strong>Group items by category</strong> checkbox.  Then check the box next to <strong>com.franz.agraph.feature</strong>.  Click the <strong>Next</strong> button. </p><p>Confirm that you want to install the AllegroGraph plugin. Accept the license agreement. Ignore the warning about unsigned plugins. The Available Software dialog will close. </p><p>Close and restart TopBraid Composer to activate the AllegroGraph plugin. </p><a name='header3-112' id='header3-112'></a><h3>Testing the Installation (for TBC 5.1.4 and earlier)</h3><p>To test the AllegroGraph plugin installation, you will need access to an AllegroGraph server (version 4.0.6 or later). You will need the URL and port number of the server, plus the name and password of an AllegroGraph user who is authorized to create and manipulate a triple store. </p><p>The test consists of taking a .owl ontology in the TopBraid environment, converting it into AllegroGraph format, pushing it to a triple store on the AllegroGraph server, and then running a SPARQL query that returns results from AllegroGraph back to TopBraid Composer. </p><h4>Connect TBC to AllegroGraph (for TBC 5.1.4 and earlier)</h4><p>Create a new folder in the <strong>Navigator Pane</strong> to contain your AllegroGraph ontologies. Right-click the <strong>TopBraid</strong> node and follow the context menu to <strong>New > Folder</strong>. Name the folder <strong>AG4</strong>.<br />
</p><p><img src="tbc_folder.jpg" alt="AG4 Folder"></img> </p><p>In the <strong>Navigator Pane</strong>, open the <strong>TopBraid/Examples</strong> node and double-click on <strong>geotravel.owl</strong>. This will open the ontology in various panes of the TopBraid interface. </p><p><img src="tbc_geotravel.jpg" alt="Edit Geotravel"></img> </p><p>The next step is to export <strong>geotravel.owl</strong> as an AllegroGraph database. In the <strong>Navigator Pane</strong>, right-click the <strong>TopBraid/AG4</strong> node, and select <strong>Export</strong> from the context menu. In the <strong>Export</strong> dialog box, open the <strong>TopBraid Composer</strong> node and select <strong>Export/Merge/Convert RDF Graphs</strong>. Click <strong>Next</strong>. </p><p><img src="tbc_export.jpg" alt="Export Geotravel"></img> </p><p>On the next panel, select the <strong>AllegroGraph 4 Database Storage (*.ag4)</strong> format, and give the target file a name, such as <strong>geotravel</strong>. No suffix is needed on the file name. We only want to export one graph: geotravel.owl.  Click <strong>Next</strong>. </p><p><img src="tbc_export2.jpg" alt="Export Geotravel"></img> </p><p>On the next panel, enter your AllegroGraph URL, port number, and credentials. Enter the name of an existing AllegroGraph catalog, or leave that field blank to use the default RootCatalog. Then enter the name of the repository you want to use within that catalog, such as <strong>tbcgeo</strong>. If you use a new repository name, AllegroGraph will create a repository for you. </p><p>(Note that Catalogs cannot be created from TopBraid Composer. New catalogs are created by editing the AllegroGraph server's configuration file.) </p><p><img src="tbc_export3.jpg" alt="Export Geotravel"></img> </p><p>Click <strong>Finish</strong>. TopBraid Composer will upload the data to the AllegroGraph server. This might take a while, depending on the size of your ontology file. For the geotravel example, it takes a few seconds. </p><p>When the data finishes loading, you should see a geotravel.ag4 file in your TopBraid/AG4 folder. </p><p>Close the geotravel.owl overview panel. (If you omit this step, TopBraid will complain about having two copies of the same model open at the same time when you export to AllegroGraph.) </p><p>In the <strong>Navigator Pane</strong>, double-click the <strong>geotravel.ag4</strong> file. You'll see an <strong>AG4 Repository Connection</strong> dialog box that displays your AllegroGraph connection information and credentials. There is no need to change these settings. Click <strong>Finish</strong>. </p><p><img src="tbc_export4.jpg" alt="Export Geotravel"></img> </p><h4>SPARQL and Prolog Queries (for TBC 5.1.4 and earlier)</h4><p>Open TopBraid's SPARQL editor pane (look for the SPARQL tab).  It contains a default SPARQL query that searches for rdfs:subClassOf triples.  The SPARQL window has three buttons that let you run a query with or without locally-configured inferencing. Click the green "Run" button to run this query.  After a few seconds you will see a table of ?subject and ?object values returned from the triple store.<br />
</p><p><img src="tbc_export5.jpg" alt="SPARQL View"></img> </p><p>The TopBraid SPARQL editor lets you use TopBraid's local inference features.  To use AllegroGraph's server-side inference (and to pose Prolog queries in addition to SPARQL queries), you'll need to open the <strong>Agraph View</strong>.  Select Window menu &gt; Show view &gt; Other... to open the <strong>Show View</strong> dialog box. In the <strong>TopBraid</strong> folder select the <strong>Agraph</strong> view. Click the <strong>OK</strong> button. </p><p><img src="tbc_view.jpg" alt="Agraph View"></img> </p><p>This opens a new query-editing pane in the TopBraid window. This Agraph view accepts both SPARQL and Prolog queries.  It has three buttons that perform the following functions: </p>
<ul>
<li>Execute the query.</li>
<li>Toggle on/off AllegroGraph's reasoning.</li>
<li>Toggle SPARQL/Prolog query language.</li></ul><p><img src="tbc_export6.jpg" alt="Agraph View"></img> </p><p>To try a Prolog query, copy this text into the edit pane: </p>
<pre><code>(select (?s ?o)  
(q ?s !rdfs:subClassOf ?o)) </code></pre><p>Click the button that selects the Prolog query language. Then click the Run button. </p><p>Query results from the Prolog query prove that the AllegroGraph plugin is installed and working correctly. </p><a name='header3-146' id='header3-146'></a><h3>Connecting TBC to the Virtual Server on Windows or Mac (for TBC 5.1.4 and earlier)</h3><p>AllegroGraph runs on 64-bit (x86-64) Linux.  Windows and Mac users can simulate a 64-bit Linux environment using the <strong>AllegroGraph Virtual Machine</strong>, which can be downloaded from the <a href="http://franz.com/agraph/downloads/" target="_blank">AllegroGraph Download</a> page. The virtual machine has AllegroGraph pre-installed on port 10035.  TopBraid Composer can be connected to the virtual machine for experiments where performance is not critical. </p><p>Both the virtual server and TopBraid can be installed on the same laptop, if desired, or TopBraid can connect to the virtual machine from another computer across a network. </p><h4>TBC and VM on the Same Computer (for TBC 5.1.4 and earlier)</h4><p>To connect TopBraid Composer to a virtual AllegroGraph server, with both running on the same physical computer, all you need is the IP address of the virtual machine. This IP address is usually assigned when the virtual machine comes on line, and may change from session to session. To discover the current IP address, open a terminal window in the virtual machine and type the <strong>ifconfig</strong> command.  (Note: ifconfig, not ipconfig.) The server's IP address is in the second line of the response. </p><p><img src="tbc_virtual.jpg" alt="Vitural Machine"></img> </p><p>Use this IP address and the AllegroGraph port number (10035) when you connect TopBraid Composer to the virtual AllegroGraph server.<br />
</p><h4>Connect TBC to the VM on a Local Network (for TBC 5.1.4 and earlier)</h4><p>The AllegroGraph Virtual Machine's network adaptor is set of Network Address Translation (NAT) by default.  This setting makes it easy to connect TBC to the VM when both are on the same host computer. If you have TBC and the VM running on separate computers, you might encounter difficulty making the connection. </p><p>To connect to a virtual AllegroGraph server on a network computer, you will have to reconfigure the virtual machine's network adaptor. Open the VM menu &gt; Settings... &gt; Network Adaptor dialog box. The object is to turn off NAT and enable "bridging" instead. </p><h4>Windows (for TBC 5.1.4 and earlier)</h4><p>Select "Bridged: Connect directly to the physical network." Check the option that says "Replicate the physical network connectivity state." </p><p><img src="tbc_bridge1.jpg" alt="Network Settings"></img> </p><h4>Mac (for TBC 5.1.4 and earlier)</h4><p>Select "Connect directly to the physical network (Bridged)." Select "Autodetect." </p><p><img src="tbc_bridge2.jpg" alt="Network Settings"></img> </p><p>Close the dialog box and reboot the virtual machine. Use "ifconfig" to get the new IP address. This address (using port 10035) will connect across the network. </p><p>If there are further issues, see the <a href="http://www.vmware.com/support/pubs/" class="external" target="_blank">VMware documentation.</a> </p><a name='header3-164' id='header3-164'></a><h3>Checking for Updates (for TBC 5.1.4 and earlier)</h3><p>The AllegroGraph TopBraid Composer plugin will be updated as needed.  To check for an update, open the <strong>Help</strong> menu and select <strong>Check for Updates.</strong> </p><a name='header3-166' id='header3-166'></a><h3>Removing the AllegroGraph Plugin (for TBC 5.1.4 and earlier)</h3><p>To remove the AllegroGraph plugin from TopBraid Composer, open the <strong>Help</strong> menu and select <strong>Install New Software...</strong>. On the resulting dialog box, click the link labeled "What is already installed?" </p><p>This opens a list of installed plugins. Click on <strong>com.franz.agraph.feature</strong> and then on the <strong>Uninstall...</strong> button. </p><a name='header2-169' id='header2-169'></a><h2>Known Issues</h2><p>This section lists all known issues in the latest version of the AllegroGraph Plugin. </p>
<ul>
<li>When you export data to AllegroGraph using the AllegroGraph Plugin in   TBC, a triple describing the ontology's base URI (<code>&lt;baseUri&gt; rdf:type   owl:Ontology</code>) is added, even if it already exists in the data. If the   database doesn't have duplicate removal enabled, this causes a   duplicate entry to appear. </li></ul></div> </div>  <p><script> $.each($("#agmenu ul li a"), function(ignore, link) {   var anchor = $(link);   anchor.parent().on("click", function () { window.location = anchor.prop("href"); }); }); $("#agmenu").css("display", "block") </script> </p> 
</body>
</html>
