<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="author" content="Franz Incorporated"/>
<title>Transaction Log Archiving</title>
<link rel='stylesheet' href='jquery-ui.custom.min.css' />
<link rel='stylesheet' href='stylesheet.css' />
<link rel='stylesheet' href='print.css' media='print' />
<body id="transactionLog"> <div id="header"> <p>                 </p>                <p><script src="jquery.min.js" type="text/javascript" charset="utf-8"></script> <script src="jquery-ui.custom.min.js" type="text/javascript" charset="utf-8"></script> <script src="activebookmark.js" type="text/javascript" charset="utf-8"></script> </p> <div id='search-form'>   <form method="GET" action="https://www.google.com/search">     <input type="hidden" name="as_sitesearch" value=""> </input>     <input type="text" size="40" name="as_q" value="" placeholder="Please enable JavaScript to use search!"> </input>&nbsp;     <input type="submit" value="Search" disabled> </input>   </form> </div> <script>    /* Docudown has no support for function calls in HTML attributes. 
<ul>
<li>Thus, we set the as_sitesearch attribute using JavaScript below.    */   (function () { 'use strict'; var properValue = "franz.com/agraph/support/documentation/6.4.2/"; var input = document.querySelector(   '#search-form input[name="as_sitesearch"]'); input.setAttribute('value', properValue); /* The submit button was disabled so that search would be 
<ul>
<li>impossible for users without JavaScript. Enabling now: */ document.querySelector('#search-form input[type="submit"]').   removeAttribute('disabled'); document.querySelector('#search-form input[name="as_q"]').   removeAttribute('placeholder');   })(); </script> <div id="copyright">  Copyright (c) 2005 - 2018 Franz, Incorporated</div> <div id="timestamp">  Last updated 8 June 2018 at 06:55</div> <a href="https://franz.com" alt="Franz Inc Home Page"><div id="hdLogo"> </div></a> </li></ul></li></ul>       <h1>Transaction Log Archiving in AllegroGraph 6.4.2</h1></div> <div id="contents">  <div id="docIndex"> <ul id="agmenu"> <li><a href="index.html">Documentation Index</a> 
<ul>
<li><a href="release-notes.html">Release Notes</a></li>
<li><a href="agraph-quick-start.html">Quick Start</a></li>
<li><a href="agraph-introduction.html" id="agraph-introduction-tab">Introduction</a></li>
<li>Setup and Configuration
<ul>
<li><a href="http://franz.com/agraph/downloads/" target="_blank">Download</a></li>
<li><a href="server-installation.html">Server Installation</a></li>
<li><a href="daemon-config.html">Server Configuration and Control</a></li>
<li><a href="agwebview.html">WebView</a></li>
<li><a href="upgrade-guide.html">Database Upgrading</a></li></ul></li>
<li>Server Management
<ul>
<li><a href="performance-tuning.html">Performance Tuning</a></li>
<li><a href="deleting-duplicate-triples.html">Deleting Duplicate Triples</a></li>
<li><a href="purging-deleted-triples.html">Purging Deleted Triples</a></li>
<li><a href="audit.html">Auditing</a></li>
<li><a href="managing-users.html">Managing Users</a></li>
<li><a href="replication.html">Replication</a></li>
<li><a href="point-in-time-recovery.html">Point-in-Time Recovery</a></li>
<li><a href="transaction-log-archiving.html">Transaction Log Archiving</a></li>
<li><a href="security-overview.html">Security Overview</a></li>
<li><a href="security.html">Security Implementation</a></li></ul></li>
<li>Tools
<ul>
<li><a href="agtool.html">agtool</a></li>
<li><a href="agload.html">Data Loading</a></li>
<li><a href="agexport.html">Data Export</a></li>
<li><a href="backup-and-restore.html">Backup and Restore</a></li>
<li><a href="agquery.html">Querying</a></li>
<li><a href="reasoner-tutorial.html" id="reasoner-tutorial-tab">RDFS++</a></li>
<li><a href="materializer.html">Materializer</a></li></ul></li>
<li>Details
<ul>
<li><a href="triple-index.html">AllegroGraph Indices</a></li>
<li><a href="text-index.html">Full-text Indices</a></li>
<li><a href="encoded-ids.html">Encoded IDs</a></li>
<li><a href="connection-pooling.html">Connection Pooling</a></li>
<li><a href="geospatial-nd.html">N-dimensional Geospatial Overview</a></li>
<li><a href="magic-properties.html#sparql-magic-geo-2d">2-D Geospatial</a></li>
<li><a href="magic-properties.html#sparql-magic-temporal">Temporal</a></li>
<li><a href="magic-properties.html#sparql-magic-sna">Social Network</a></li>
<li><a href="javascript.html">JavaScript</a></li>
<li><a href="datatypes.html">Datatypes</a></li>
<li><a href="rapper.html">Data Conversion (Rapper)</a></li>
<li><a href="stored-procedures.html">Stored Procedures</a></li>
<li><a href="triple-attributes.html">Triple Attributes</a></li></ul></li>
<li>Querying
<ul>
<li><a href="sparql-overview.html">SPARQL documentation summary</a></li>
<li><a href="sparql-reference.html">SPARQL Reference</a></li>
<li><a href="spin.html">SPIN</a></li>
<li><a href="magic-properties.html">SPARQL Magic Properties</a></li>
<li><a href="prolog-tutorial.html">Prolog</a></li></ul></li>
<li>3rd-party tools
<ul>
<li><a href="solr-index.html">Solr text Indices</a></li>
<li><a href="mongo-interface.html">MongoDB integration</a></li>
<li><a href="TBCplugin.html">TopBraid Composer Plugin</a></li>
<li><a href="agraph-introduction.html#othertools">Cloudera</a></li></ul></li>
<li>Client APIs
<ul>
<li><a href="http://franz.com/agraph/gruff/" title="Gruff" target="_blank">Gruff</a></li>
<li><a href="http-protocol.html">REST/HTTP interface</a></li>
<li><a href="http-reference.html">HTTP reference</a></li>
<li><a href="javadoc/index.html">Javadocs (Sesame and Jena)</a></li>
<li><a href="python/index.html">Python API</a></li>
<li><a href="lisp-reference.html">Lisp Reference</a></li>
<li><a href="javascript.html">JavaScript</a></li></ul></li>
<li>Tutorials
<ul>
<li><a href="geospatial-nd-tutorial.html">N-dimensional Geospatial</a></li>
<li><a href="sparql-tutorial.html">SPARQL Tutorial</a></li>
<li><a href="java-tutorial/java-tutorial.html">Java Sesame</a></li>
<li><a href="java-tutorial/jena-tutorial.html">Java Jena</a></li>
<li><a href="python/tutorial.html">Python Sesame</a></li>
<li><a href="lisp-quickstart.html">Lisp</a></li>
<li><a href="prolog-tutorial.html">Prolog</a></li>
<li><a href="tutorial-index.html">More...</a></li></ul></li>
<li>Other
<ul>
<li><a href="suggested-reading.html">Suggested Reading</a></li>
<li><a href="http://franz.com/ps/services/conferences_seminars/" title="Conferences and Seminars" target="_blank">Conferences and Seminars</a></li>
<li><a href="http://github.com/franzinc">Source Code on Github</a></li>
<li><a href="http://agraph.franz.com/cresources/index.lhtml" target="_blank">Community Resources</a></li>
<li><a href="http://franz.com/agraph/ec2/">Amazon EC2</a></li>
<li><a href="copyrights.html">Copyrights</a></li>
<li><a href="change-history.html" id="change-history-tab">Change History</a></li></ul></li>
<li><a href="http://franz.com/" target="_blank">Franz, Inc.</a> </li> </ul> </li></ul><p><script> $(function() { $( "#agmenu" ).menu(); }); </script> </p></div>   
<div class='table-of-contents' id='table-of-contents'>

<ul>
<li><a href='#header2-8' title='Introduction'>Introduction</a></li>
<li><a href='#header2-11' title='Configuration directives'>Configuration directives</a>
<ul>
<li><a href='#header3-14' title='TransactionLogArchive PATHNAME'>TransactionLogArchive PATHNAME</a></li>
<li><a href='#header3-16' title='TransactionLogRetain VALUE'>TransactionLogRetain VALUE</a></li>
<li><a href='#header3-22' title='TransactionLogReplicationJobname VALUE'>TransactionLogReplicationJobname VALUE</a></li></ul></li>
<li><a href='#header2-24' title='Examples'>Examples</a></li></ul>
<div id='tocLink'><a href='index.html'>Documentation Index</a></div>
</div>
  <div id="main-content"> <a name='header2-8' id='header2-8'></a><h2>Introduction</h2><p>The AllegroGraph transaction log archiver is a built-in feature for managing transaction log files.  Transaction logs are created in the directory specified by the TransactionLogDir configuration parameter (or the main database directory if TransactionLogDir is not specified). Unless they are moved or removed by the transaction log archiver, the number and total size of the transaction logs will grow without bound. </p><p><a name="transaction-log-config"></a> </p><a name='header2-11' id='header2-11'></a><h2>Configuration directives</h2><p>The transaction log archiver is controlled by a set of catalog-specific configuration parameters. Configuration parameters are described in <a href="daemon-config.html">Server Configuration and Control</a>. </p><p>There used to be three directives associated with transaction logs. Now there is only one, <code>TransactionLogArchive</code>. The other two are no longer used. We describe them so users will know what they used to do and how to achieve the same result using new tools. </p><a name='header3-14' id='header3-14'></a><h3>TransactionLogArchive PATHNAME</h3><p>If this directive is specified, transaction log files, when no longer needed for data recovery or replication, will be moved the the directory specified by PATHNAME. If this directive is not specified, the files will be deleted when they are no longer needed. This behavior is a change from releases prior to version 6.3.0 where the no longer used <code>TransactionLogRetain</code> directive specified what was to be done with unneeded transaction log files. </p><a name='header3-16' id='header3-16'></a><h3>TransactionLogRetain VALUE</h3><p><strong>No longer used. This directive will be ignored starting in release 6.3.0 and a warning will be generated when AllegroGraph starts if this directive is found in the configuration file.</strong> This directive used to specify what to do with unneeded transaction log files.  Now such files are either archived or deleted when they are no longer needed for data recovery or replication (that is, when all data they describe has been checkpointed). Whether the files are archived or deleted is controlled by the <code>TransactionLogArchive</code> directive described above. VALUE used to be one of: </p>
<ul>
<li><p><strong>recovery</strong>: files are only kept as necessary for recovery. Files necessary for recovery are always kept so this choice meant the system should do nothing extra. </p></li>
<li><p><strong>archive</strong>: told the system to move transaction log files to the   archive location specified by the <code>TransactionLogArchive</code> directive   when they were no longer needed for recovery or replication. Files   are now archived when a value is specified for the   <code>TransactionLogArchive</code> directive. </p></li>
<li><p><strong>replication</strong>: this value informed the system that transaction log files were also needed by replica databases. This is now done when replicas are registered. </p></li>
<li><p><strong>all</strong>: told the system to keep all transaction log files in the transaction log file location. This option is no longer supported, but archiving keeps all files in the archive directory. </p></li></ul><a name='header3-22' id='header3-22'></a><h3>TransactionLogReplicationJobname VALUE</h3><p><strong>This directive is no longer used. This directive will be ignored starting in release 6.3.0 and a warning will be generated when AllegroGraph starts if this directive is found in the configuration file</strong>. This directive allowed you to specify a replication jobname. Now you register a jobname with the <strong>agtool replicate</strong> command (see <a href="agtool.html#replicate">The agtool replicate utility</a> and the <a href="warm-standby.html">Replication and Warm Standby</a> document). </p><a name='header2-24' id='header2-24'></a><h2>Examples</h2><p>The transaction log archiver is configured by parameters in the &lt;Catalog&gt; or &lt;RootCatalog&gt; sections of the <strong>agraph.cfg</strong> file. (For additional information about agraph.cfg, see the <a href="daemon-config.html">Server Configuration</a> document.) </p><p>Here are examples of configuration entries for different scenarios. The examples show these entries being added to the root catalog. </p><p>If you don't care about <a href="point-in-time-recovery.html">point-in-time recovery</a> and just wish to keep the minimum number of transaction logs on the disk, do not specify a value for <code>TransactionLogArchive</code> in any catalog specification. </p><p>If you care about point-in-time restore and you want to save all transaction logs, use the following configuration, choosing your own directory as the <code>TransactionLogArchive</code> value. Here the directive is for the <em>root</em> catalog. A similar directive must appear in each catalog specification for all catalogs whose transaction logs you want archived. </p>
<pre><code>&lt;RootCatalog&gt;  
    TransactionLogArchive /arch/root-tlogs/  
    ....  
&lt;/RootCatalog&gt;  
</code></pre></div> </div>  <p><script> $.each($("#agmenu ul li a"), function(ignore, link) {   var anchor = $(link);   anchor.parent().on("click", function () { window.location = anchor.prop("href"); }); }); $("#agmenu").css("display", "block") </script> </p> 
</body>
</html>
