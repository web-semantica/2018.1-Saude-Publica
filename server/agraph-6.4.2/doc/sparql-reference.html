<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="author" content="Franz Incorporated"/>
<title>SPARQL API reference | AllegroGraph 6.4.2</title>
<link rel='stylesheet' href='jquery-ui.custom.min.css' />
<link rel='stylesheet' href='stylesheet.css' />
<link rel='stylesheet' href='print.css' media='print' />
<body id="sparql-reference"><div id="header"> <p>                 </p>                <p><script src="jquery.min.js" type="text/javascript" charset="utf-8"></script> <script src="jquery-ui.custom.min.js" type="text/javascript" charset="utf-8"></script> <script src="activebookmark.js" type="text/javascript" charset="utf-8"></script> </p> <div id='search-form'>   <form method="GET" action="https://www.google.com/search">     <input type="hidden" name="as_sitesearch" value=""> </input>     <input type="text" size="40" name="as_q" value="" placeholder="Please enable JavaScript to use search!"> </input>&nbsp;     <input type="submit" value="Search" disabled> </input>   </form> </div> <script>    /* Docudown has no support for function calls in HTML attributes. 
<ul>
<li>Thus, we set the as_sitesearch attribute using JavaScript below.    */   (function () { 'use strict'; var properValue = "franz.com/agraph/support/documentation/6.4.2/"; var input = document.querySelector(   '#search-form input[name="as_sitesearch"]'); input.setAttribute('value', properValue); /* The submit button was disabled so that search would be 
<ul>
<li>impossible for users without JavaScript. Enabling now: */ document.querySelector('#search-form input[type="submit"]').   removeAttribute('disabled'); document.querySelector('#search-form input[name="as_q"]').   removeAttribute('placeholder');   })(); </script> <div id="copyright">  Copyright (c) 2005 - 2018 Franz, Incorporated</div> <div id="timestamp">  Last updated 8 June 2018 at 06:55</div> <a href="https://franz.com" alt="Franz Inc Home Page"><div id="hdLogo"> </div></a> </li></ul></li></ul>       <h1>SPARQL API reference</h1></div> <div id="contents">  <div id="docIndex"> <ul id="agmenu"> <li><a href="index.html">Documentation Index</a> 
<ul>
<li><a href="release-notes.html">Release Notes</a></li>
<li><a href="agraph-quick-start.html">Quick Start</a></li>
<li><a href="agraph-introduction.html" id="agraph-introduction-tab">Introduction</a></li>
<li>Setup and Configuration
<ul>
<li><a href="http://franz.com/agraph/downloads/" target="_blank">Download</a></li>
<li><a href="server-installation.html">Server Installation</a></li>
<li><a href="daemon-config.html">Server Configuration and Control</a></li>
<li><a href="agwebview.html">WebView</a></li>
<li><a href="upgrade-guide.html">Database Upgrading</a></li></ul></li>
<li>Server Management
<ul>
<li><a href="performance-tuning.html">Performance Tuning</a></li>
<li><a href="deleting-duplicate-triples.html">Deleting Duplicate Triples</a></li>
<li><a href="purging-deleted-triples.html">Purging Deleted Triples</a></li>
<li><a href="audit.html">Auditing</a></li>
<li><a href="managing-users.html">Managing Users</a></li>
<li><a href="replication.html">Replication</a></li>
<li><a href="point-in-time-recovery.html">Point-in-Time Recovery</a></li>
<li><a href="transaction-log-archiving.html">Transaction Log Archiving</a></li>
<li><a href="security-overview.html">Security Overview</a></li>
<li><a href="security.html">Security Implementation</a></li></ul></li>
<li>Tools
<ul>
<li><a href="agtool.html">agtool</a></li>
<li><a href="agload.html">Data Loading</a></li>
<li><a href="agexport.html">Data Export</a></li>
<li><a href="backup-and-restore.html">Backup and Restore</a></li>
<li><a href="agquery.html">Querying</a></li>
<li><a href="reasoner-tutorial.html" id="reasoner-tutorial-tab">RDFS++</a></li>
<li><a href="materializer.html">Materializer</a></li></ul></li>
<li>Details
<ul>
<li><a href="triple-index.html">AllegroGraph Indices</a></li>
<li><a href="text-index.html">Full-text Indices</a></li>
<li><a href="encoded-ids.html">Encoded IDs</a></li>
<li><a href="connection-pooling.html">Connection Pooling</a></li>
<li><a href="geospatial-nd.html">N-dimensional Geospatial Overview</a></li>
<li><a href="magic-properties.html#sparql-magic-geo-2d">2-D Geospatial</a></li>
<li><a href="magic-properties.html#sparql-magic-temporal">Temporal</a></li>
<li><a href="magic-properties.html#sparql-magic-sna">Social Network</a></li>
<li><a href="javascript.html">JavaScript</a></li>
<li><a href="datatypes.html">Datatypes</a></li>
<li><a href="rapper.html">Data Conversion (Rapper)</a></li>
<li><a href="stored-procedures.html">Stored Procedures</a></li>
<li><a href="triple-attributes.html">Triple Attributes</a></li></ul></li>
<li>Querying
<ul>
<li><a href="sparql-overview.html">SPARQL documentation summary</a></li>
<li><a href="sparql-reference.html">SPARQL Reference</a></li>
<li><a href="spin.html">SPIN</a></li>
<li><a href="magic-properties.html">SPARQL Magic Properties</a></li>
<li><a href="prolog-tutorial.html">Prolog</a></li></ul></li>
<li>3rd-party tools
<ul>
<li><a href="solr-index.html">Solr text Indices</a></li>
<li><a href="mongo-interface.html">MongoDB integration</a></li>
<li><a href="TBCplugin.html">TopBraid Composer Plugin</a></li>
<li><a href="agraph-introduction.html#othertools">Cloudera</a></li></ul></li>
<li>Client APIs
<ul>
<li><a href="http://franz.com/agraph/gruff/" title="Gruff" target="_blank">Gruff</a></li>
<li><a href="http-protocol.html">REST/HTTP interface</a></li>
<li><a href="http-reference.html">HTTP reference</a></li>
<li><a href="javadoc/index.html">Javadocs (Sesame and Jena)</a></li>
<li><a href="python/index.html">Python API</a></li>
<li><a href="lisp-reference.html">Lisp Reference</a></li>
<li><a href="javascript.html">JavaScript</a></li></ul></li>
<li>Tutorials
<ul>
<li><a href="geospatial-nd-tutorial.html">N-dimensional Geospatial</a></li>
<li><a href="sparql-tutorial.html">SPARQL Tutorial</a></li>
<li><a href="java-tutorial/java-tutorial.html">Java Sesame</a></li>
<li><a href="java-tutorial/jena-tutorial.html">Java Jena</a></li>
<li><a href="python/tutorial.html">Python Sesame</a></li>
<li><a href="lisp-quickstart.html">Lisp</a></li>
<li><a href="prolog-tutorial.html">Prolog</a></li>
<li><a href="tutorial-index.html">More...</a></li></ul></li>
<li>Other
<ul>
<li><a href="suggested-reading.html">Suggested Reading</a></li>
<li><a href="http://franz.com/ps/services/conferences_seminars/" title="Conferences and Seminars" target="_blank">Conferences and Seminars</a></li>
<li><a href="http://github.com/franzinc">Source Code on Github</a></li>
<li><a href="http://agraph.franz.com/cresources/index.lhtml" target="_blank">Community Resources</a></li>
<li><a href="http://franz.com/agraph/ec2/">Amazon EC2</a></li>
<li><a href="copyrights.html">Copyrights</a></li>
<li><a href="change-history.html" id="change-history-tab">Change History</a></li></ul></li>
<li><a href="http://franz.com/" target="_blank">Franz, Inc.</a> </li> </ul> </li></ul><p><script> $(function() { $( "#agmenu" ).menu(); }); </script> </p></div>   
<div class='table-of-contents' id='table-of-contents'>

<ul>
<li><a href='#header2-8' title='Introduction'>Introduction</a>
<ul>
<li><a href='#header3-29' title='Using SPARQL versus using Prolog'>Using SPARQL versus using Prolog</a></li></ul></li>
<li><a href='#header2-37' title='Choosing a Query Execution Engine'>Choosing a Query Execution Engine</a></li>
<li><a href='#header2-43' title='SPARQL Update'>SPARQL Update</a></li>
<li><a href='#header2-45' title='Valid result formats'>Valid result formats</a></li>
<li><a href='#header2-54' title='Exported functions'>Exported functions</a></li>
<li><a href='#header2-66' title='Extension functions'>Extension functions</a></li>
<li><a href='#header2-84' title='SELECT bindings and ASK results'>SELECT bindings and ASK results</a></li>
<li><a href='#header2-98' title='Returning triples from CONSTRUCT and DESCRIBE queries'>Returning triples from </a></li>
<li><a href='#header2-109' title='Variables'>Variables</a></li>
<li><a href='#header2-119' title='SPARQL and first-class triples'>SPARQL and first-class triples</a></li>
<li><a href='#header2-125' title='Datasets'>Datasets</a>
<ul>
<li><a href='#header3-126' title='Dataset loading'>Dataset loading</a></li>
<li><a href='#header3-129' title='Default dataset handling'>Default dataset handling</a></li></ul></li>
<li><a href='#header2-132' title='Verbose output'>Verbose output</a></li>
<li><a href='#header2-134' title='SPARQL and encoded values'>SPARQL and encoded values</a></li>
<li><a href='#header2-138' title='SPARQL Query Options'>SPARQL Query Options</a></li>
<li><a href='#header2-146' title='Query Warnings'>Query Warnings</a></li>
<li><a href='#header2-155' title='SPARQL functions'>SPARQL functions</a>
<ul>
<li><a href='#header3-158' title='Supported XPath functions'>Supported XPath functions</a></li>
<li><a href='#header3-162' title='AllegroGraph extensions'>AllegroGraph extensions</a></li></ul></li>
<li><a href='#header2-179' title='Variables'>Variables</a></li>
<li><a href='#header2-181' title='Function index'>Function index</a></li></ul>
<div id='tocLink'><a href='index.html'>Documentation Index</a></div>
</div>
  <div id="main-content"> <a name='header2-8' id='header2-8'></a><h2>Introduction</h2><p>This document describes AllegroGraph's <a href="http://www.w3.org/TR/rdf-sparql-query/" class="external" target="_blank">SPARQL</a> implementation. Each of the following functions are exported from the <code>db.agraph.sparql</code> package. This package is also nicknamed <code>sparql</code>. </p><p>For notes on AllegroGraph's conformance to the W3C specification please see <a href="sparql-release-notes.html">this document</a>. For notes on the SPARQL 1.1 query engine, see the <a href="sparql-1.1-release-notes.html">release notes</a>. </p><p>As of version 4.4, AllegroGraph's supports all of <a href="http://www.w3.org/TR/sparql11-query/" title="sparql" class="external" target="_blank">SPARQL 1.1</a> query including
<a name="fnr0-2018-06-08" id="fnr0-2018-06-08"></a>
<sup><a href="#fn0-2018-06-08">1</a></sup> : </p>
<ul>
<li>aggregation</li>
<li>assignment</li>
<li>bindings</li>
<li>expressions in the select clause</li>
<li>negation</li>
<li>property-paths</li>
<li>sub-query</li>
<li>update</li>
<li>basic federated query</li>
<li>expanded operators and functions</li></ul><p>AllegroGraph also provides partial support for <a href="spin.html">SPIN</a>. </p><p>Conceptually, SPARQL has three layers: </p>
<ul>
<li>a parser from the textual SPARQL surface syntax to s-expressions;</li>
<li>a query builder and planner that prepares the query for execution;</li>
<li>and an executor that runs the plan against a store to produce results.</li></ul><p>Currently, input and output from each of these layers is limited (for example, the query plan is not available to user code, but parsed output is). This may change in a future release. </p><p><a name="sparql-v-prolog"></a> </p><a name='header3-29' id='header3-29'></a><h3>Using SPARQL versus using Prolog</h3><p>Prolog is an alternative query mechanism for AllegroGraph.  The <a href="prolog-tutorial.html">Prolog tutorial</a> provides an introduction to using Prolog and AllegroGraph together. Prolog is further described <a href="lisp-reference.html#ref-prolog">here in the Lisp Reference</a> (where further links are provided). This section is a brief note on the differences between our SPARQL query engine and the Prolog <code>select</code> query engine. The main differences are: </p>
<ul>
<li><p>Prolog is a general purpose logic programming language while SPARQL is a query language (extended with Update, expressions, etc. in SPARQL 1.1). </p></li>
<li><p>Prolog makes it easy to write rules and express concepts that aren't "in triples" whereas SPARQL requires either using <a href="spin.html">SPIN</a> or <a href="defmagic-tutorial.html">magic properties</a>. </p></li>
<li><p>SPARQL is fully RDF-compliant so it "knows" more about datatypes and supports the full SPARQL 1.1 set of operators and functions. In order to do computation with Prolog, you need to call out to Lisp. </p></li>
<li><p>SPARQL has both a depth-first and a breadth-first (the default) query executor whereas Prolog has only depth-first. Depending on the query, SPARQL can be significantly more efficient. </p></li>
<li><p>The Prolog and the SPARQL query planners and query engines are different and so the they may execute a BGP differently. </p></li></ul><p><a name="sparql-queryengine"></a> </p><a name='header2-37' id='header2-37'></a><h2>Choosing a Query Execution Engine</h2><p>AllegroGraph currently has two query execution modes: Single Set and Chunk at a Time (CaaT). The former tends to be more time efficient and more memory hungry whereas CaaT takes more time but uses less memory. </p><p>Consider a query like the following: </p>
<pre><code>select * {  
  ?x :p1 ?o .  
  ?o :p2 ?y .  
} </code></pre><p>In Single Set mode, the <code>sparql-1.1</code> engine iterates over all triples whose predicate is <code>:p1</code> (call this the <em>p1</em> cursor) and creates pairs of bindings for each <code>?x</code> and <code>?o</code> It will then create a <em>p2</em> cursor to iterate over all of the triples whose predicate is <code>:p2</code> and merge the data from these triples with the bindings that have matching values for <code>?o</code>. In short, the engine proceeds through the query plan one step at a time and accumulates all of the results immediately. </p><p>The CaaT mode is similar but it processes large chunks of results rather than trying to work on the query in its entirety. In the example above, the CaaT engine would gather up a group of results from the <em>p1</em> cursor and then make a <em>p2</em> cursor to find answers. Once <em>p2</em> was exhausted, the engine would go back to the <em>p1</em> cursor and build up the next chunk of results. The size of the chunks is based on the amount of memory allocated to the query using the <a href="#query-option.chunkProcessingMemory" title="description of query-option chunkProcessingMemory">chunkProcessingMemory</a> query option. </p><a name='header2-43' id='header2-43'></a><h2>SPARQL Update</h2><p>Previously, AllegroGraph supported a version of SPARQL Update based on a <a href="http://www.w3.org/TR/2010/WD-sparql11-update-20100126/" title="specification' class external target _blank). This version is no longer supported. Instead, you should use the [SPARQL 1.1 version](http://www.w3.org/TR/sparql11-update/ 'version" class="external" target="_blank">draft specification</a>.  The <code>sparql-1.1</code> engine supports the new version. </p><a name='header2-45' id='header2-45'></a><h2>Valid result formats</h2><p>There are three possible outputs from a SPARQL query: </p>
<ul>
<li>a yes/no answer, in response to an <code>ASK</code> query;</li>
<li>a list of bindings, in response to a <code>SELECT</code> query; or</li>
<li>a new RDF graph, in response to a <code>CONSTRUCT</code> or <code>DESCRIBE</code> query.</li></ul><p>AllegroGraph provides a number of different ways to serialize these results to a stream, provided as keyword symbols to the query functions. The <code>results-format</code> argument controls how <code>ASK</code> and <code>SELECT</code> query results are serialized; some possible formats are <code>:sparql-xml</code>, which serializes the result into the <a href="http://www.w3.org/TR/rdf-sparql-XMLres/" class="external" target="_blank">SPARQL XML</a> result format, and <code>:sparql-json</code>, which uses the <a href="http://json.org/" class="external" target="_blank">JSON</a> format. </p><p>For <code>CONSTRUCT</code> and <code>DESCRIBE</code>, the value of the <code>rdf-format</code> argument applies. </p><p>The default formats are <code>:sparql-xml</code> and <code>:rdf/xml</code> respectively. Providing an unrecognized format will signal an error. </p><p>You can find out which formats are allowed for a particular verb by using <code>get-allowed-results-formats</code> and <code>get-allowed-rdf-formats</code>. </p><a name='header2-54' id='header2-54'></a><h2>Exported functions</h2>
<a name="function.parse-sparql" id="function.parse-sparql"></a>
<a name="parse-sparql" id="parse-sparql"></a>
<div class="documentation function"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">parse-sparql</span>
<span class="documentation-arguments"><span class="argument">string</span> &nbsp;<span class="marker">&amp;optional</span> &nbsp;<span class="argument">default-prefixes</span> &nbsp;<span class="argument">default-base</span></span>
</div>
<span class="documentation-kind">function</span>
</div>
<div class="documentation contents"><p>Parse a SPARQL query string into an s-expression. </p><p>This function is useful for three reasons: validation and inspection of queries, manual manipulation of query expressions without text processing, and performing parsing at a more convenient time than during query execution. </p><p>You do not need an open triple-store in order to parse a query. Any parse errors will signal a <code>sparql-parse-error</code>. </p><p>The optional arguments provide <code>BASE</code> and <code>PREFIX</code> arguments to the parser without inserting them textually into the query. </p>
<dl><dt><code>default-base</code> </dt>
<dd>A string to use as the BASE for the SPARQL query.</dd><dt><code>default-prefixes</code> </dt>
<dd>A <code>dictionary</code> or <code>hash-table</code> mapping string prefixes to their namespace expansions, or a list of two element lists where each sublist contains the prefix and its expansion. For example: 
<pre><code>(("rdf" "http://www.w3.org/1999/02/22-rdf-syntax-ns#")  
 ("rdfs" "http://www.w3.org/2000/01/rdf-schema#")  
 ("owl" "http://www.w3.org/2002/07/owl#")  
 ("xsd" "http://www.w3.org/2001/XMLSchema#")  
 ("xs" "http://www.w3.org/2001/XMLSchema#")  
 ("fn" "http://www.w3.org/2005/xpath-functions#")  
 ("err" "http://www.w3.org/2005/xqt-errors#")) </code></pre></dd><p>This list uses the same format as <a href="lisp-reference.html#x:2Astandard-namespaces:2A" title="description of *standard-namespaces*">db.agraph:<em>standard-namespaces</em></a>. </p></dl><p><code>parse-sparql</code> returns the s-expression representation of the query string. </p>
</div>
</div>
  
<a name="function.run-sparql" id="function.run-sparql"></a>
<a name="run-sparql" id="run-sparql"></a>
<div class="documentation function"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">run-sparql</span>
<span class="documentation-arguments"><span class="argument">query</span> &nbsp;<span class="marker">&amp;rest</span> &nbsp;<span class="argument">args</span> &nbsp;<span class="marker">&amp;key</span> &nbsp;<span class="argument">engine</span> &nbsp;<span class="argument">db</span> &nbsp;<span class="argument">default-base</span> &nbsp;<span class="argument">default-prefixes</span> &nbsp;<span class="argument">output-stream</span> &nbsp;<span class="argument">if-exists</span> &nbsp;<span class="argument">if-does-not-exist</span> &nbsp;<span class="argument">results-format</span> &nbsp;<span class="argument">rdf-format</span> &nbsp;<span class="argument">limit</span> &nbsp;<span class="argument">offset</span> &nbsp;<span class="argument">from</span> &nbsp;<span class="argument">from-named</span> &nbsp;<span class="argument">default-dataset-behavior</span> &nbsp;<span class="argument">default-graph-uris</span> &nbsp;<span class="argument">using-named-graph-uri</span> &nbsp;<span class="argument">remove-graph-uri</span> &nbsp;<span class="argument">using-graph-uri</span> &nbsp;<span class="argument">insert-graph-uri</span> &nbsp;<span class="argument">with-variables</span> &nbsp;<span class="argument">destination-db</span> &nbsp;<span class="argument">cancel-query-on-warnings-p</span> &nbsp;<span class="argument">host</span> &nbsp;<span class="argument">basic-authorization</span> &nbsp;<span class="argument">timeout</span> &nbsp;<span class="argument">uuid</span> &nbsp;<span class="argument">log-query</span> &nbsp;<span class="argument">load-function</span> &nbsp;<span class="argument">verbosep</span> &nbsp;<span class="argument">permitted-verbs</span> &nbsp;<span class="argument">parsed-package</span> &nbsp;<span class="argument">primary?</span> &nbsp;<span class="argument">parent-executor</span> &nbsp;<span class="argument">service-db</span> &nbsp;<span class="argument">extendedp</span> &nbsp;<span class="argument">planner</span> &nbsp;<span class="argument">user-attributes-prefix-permission-p</span> &nbsp;<span class="marker">&amp;allow-other-keys</span></span>
</div>
<span class="documentation-kind">function</span>
</div>
<div class="documentation contents"><p><code>run-sparql</code> takes a SPARQL query or update command as input and returns bindings or new triples as output. </p><p><code>SELECT</code>, <code>ASK</code> and <code>UPDATE</code> query results will be presented according to the value provided for <code>results-format</code>, whilst the RDF output of <code>DESCRIBE</code> and <code>CONSTRUCT</code> will be serialized according to <code>rdf-format</code>. Both of these arguments take keyword values. </p><p>If the format is programmatic (that is, it is intended to return values rather than print a representation; <code>:arrays</code> is an example) then any results will be returned as the first value, and nothing will be printed on <code>output-stream</code>. </p>
<ul>
<li>The <code>query</code> can be a string, which will be parsed by   <code>parse-sparql</code>, an s-expression as produced by   <code>parse-sparql</code>, or a query plan generated by a previous call   to <code>run-sparql</code>. The s-expression syntax is described in   greater detail in the <a href="sparql-sexpr.html">reference</a>.   If you expect to run a query many times,   you can avoid some parser overhead by parsing or planning your query   once and calling <code>run-sparql</code> with the parsed   representation. <p>If <code>query</code> is a string, then <code>default-base</code> and     <code>default-prefixes</code> are provided to <a href="#parse-sparql" title="description of parse-sparql">parse-sparql</a> to use     when parsing the query. The former specifies a <code>BASE</code> when none     is provided and the later specifies a set of namespace     abbreviations to use when parsing. Parser errors signaled     within <a href="#parse-sparql" title="description of parse-sparql">parse-sparql</a> will be propagated onwards by     <code>run-sparql</code>. </p></li>
<li><p><code>default-base</code> A string to use as the BASE for the SPARQL   query (only used when <code>query</code> is a string). </p>
<li><p><code>default-prefixes</code> A <code>hash-table</code> mapping string prefixes to their   expansions or a list of two element lists where each sublist   contains the prefix and its namespace expansion (only used when   <code>query</code> is a string; see <a href="#parse-sparql" title="description of parse-sparql">parse-sparql</a> for details). </p></li>
<li><p>Results or new triples will be serialized to <code>output-stream</code>. If a   programmatic format is chosen for output, the stream is   irrelevant. An error will be signaled if <code>output-stream</code> is not a   stream, <code>t</code> (for output to <code>*standard-output*</code>), or <code>nil</code> (for output   to a string) or a pathname.  If a pathname is specified, then the   <code>if-exists</code> and <code>if-does-not-exist</code> parameters will be as used to   create an output stream. </p></li>
<li><p>If <code>from</code> or <code>from-named</code> are provided,   they override the corresponding values specified in the   query string itself. As <code>FROM</code> and <code>FROM NAMED</code> together   define a dataset, and the SPARQL Protocol specification   states that a dataset specified in the protocol (in this   case, the programmatic API) overrides that in the query, if   either <code>from</code> or <code>from-named</code> are non-<code>nil</code> then any   dataset specifications in the query are ignored. You can   specify that the contents of the query are to be partially   overridden by providing <code>t</code> as the value of one of these   arguments. This is interpreted as 'use the contents of the   query'. <code>from</code> and <code>from-named</code> should be lists of URIs:   future-parts, UPIs, or strings. </p></li>
<li><p>If the <code>limit</code> parameter is specified and the query string   also contains a LIMIT, then the minimum of the two will   be used. </p></li>
<li><p>If the <code>offset</code> parameter is specified and the query string   also contains an OFFSET, then the sum of the two will be   used. </p></li>
<li><p>The <code>using-named-graph-uri</code> and <code>using-graph-uri</code> parameters   are used similarly to the <code>from</code> and <code>from-named</code> parameters   except that they are relevant only to SPARQL UPDATE commands. </p></li>
<li><p>The <code>remove-graph-uri</code> and <code>insert-graph-uri</code> parameters are   also used only in SPARQL update. The first specifies a graph or   list of graphs from which each triple to be deleted should be   removed whereas the second specifies a graph or   list of graphs into which each triple to be inserted should be   added. </p></li>
<li><p><code>default-dataset-behavior</code> controls how the query engine   builds the dataset environment if <code>FROM</code> or <code>FROM NAMED</code>   are not provided. Valid options are <code>:all</code> (ignore graphs;   include all triples) and <code>:default</code> (include only the   store's default graph). </p></li>
<li><p><code>default-graph-uris</code> allows you to specify a list of   resources which, when encountered in the SPARQL dataset   specification, are to be treated as the default graph of   the store. Each resource can be a resource UPI, resource   future-part, or a URI string. For example, specifying   '("http://example.com/default") will cause a query   featuring </p>
<pre><code>FROM &lt;http://example.com/default&gt;  
FROM &lt;http://example.com/baz&gt; </code></pre></li></li><p>to execute against the union of the contents of the named graph <code>&lt;http://example.com/baz&gt;</code> and the store's default graph, as determined by <code>(default-graph-upi db)</code>. </p>
<li><code>with-variables</code> should be an alist of variable names and   values. The variable names can be strings (which will be   interned in the package in which the query is parsed) or   symbols (which should be interned in the package in which   the query is to be, or was, parsed). The variable names can   include or omit a leading '?'. Note that a query literal in   code might be parsed at compile time. Using strings is the   most reliable method for naming variables. </li><p>Before the query is executed, the variables named after symbols will be bound to the provided values. </p><p>This allows you to use variables in your query which are externally imposed, or generated by other queries. The format expected by <code>with-variables</code> is the same as that used for each element of the list returned by the <code>:alists</code> <code>results-format</code>. </p>
<li><p><code>db</code> (<a href="lisp-reference.html#x:2Adb:2A" title="description of *db*"><code>*db*</code></a> by default) specifies the triple store   against which queries should run. </p></li>
<li><p><code>destination-db</code> (<code>db</code> by default) specifies the triple   store against which Update modifications should take place.   This is primarily of use when <code>db</code> is a read-only wrapper   around a writable store, such as when reasoning has been   applied. </p></li>
<li><p>If <code>verbosep</code> is non-<code>nil</code>, status information is written   to <code>*sparql-log-stream*</code> (<code>*standard-output*</code> by default). </p></li>
<li><p><code>basic-authorization</code> is used when making SPARQL SERVICE   calls. It must be a cons cell whose <code>car</code> is the user name and   whose <code>cdr</code> is the password. For example: `("test" . "password"). </p></li>
<li><p><code>load-function</code> must be <code>nil</code> or a function with signature <code>(uri db   type)</code>. If it is a function, it is called once for each <code>FROM</code> and   <code>FROM NAMED</code> parameter making up the dataset of the query. The   execution of the query commences once each parameter has been   processed. The <code>type</code> argument is either <code>:from</code> or <code>:from-named</code>,   and the <code>uri</code> argument is a part (ordinarily a <code>future-part</code>) naming   a URI. The default value is taken from   <code>*dataset-load-function*</code>. You can use this hook function to   implement loading of RDF before the query is executed. </p></li>
<li><p>If <code>cancel-query-on-warnings-p</code> is true, then any warning   found during query planning will immediately cancel the query.   Setting this to true can help in query debugging. </p></li>
<li><p><code>host</code> can be used to specify the URL of a SPARQL endpoint.   If <code>host</code> is given, then AllegroGraph will send the query   to the endpoint, retrieve any results and emit them in the   format specified by <code>results-format</code> or <code>rdf-format</code> as   appropriate. </p></li>
<li><p><code>timeout</code> should be the number of seconds after which the   query will be canceled. A value of nil means no timeout. Note   that a query timeout does not interrupt the query immediately.   Rather, the executing query will periodically check for   timeouts and cancel itself. This allows for any query resources   to be properly reclaimed. </p></li>
<li><p>The <code>engine</code> keyword specifies which query engine to use.  Allowable   values keyword symbols returned by <a href="#valid-query-engines" title="description of valid-query-engines">valid-query-engines</a>. Note   that depending on the version of AllegroGraph, there may be only a   single engine available. </p></li>
<li><p>`user-attributes-prefix-permission-p' must be given a true value in order to   run a Sparql query including "prefix franzOption_userAttributes" otherwise   an error is signalled. </p></li></ul><p>The values returned by <code>run-sparql</code> are dependent on the verb used. The first value is typically disregarded in the case of results being written to <code>output-stream</code>. If <code>output-stream</code> is <code>nil</code>, the first value will be the results collected into a string (similar to the way in which <code>cl:format</code> operates). </p><p>The second value is the query verb: one of <code>:select</code>, <code>:ask</code>, <code>:construct</code>, <code>:describe</code>, or <code>:update</code>. </p><p>The third value, for <code>SELECT</code> queries only, is a list of variables. This list can be used as a key into the values returned by the <code>:arrays</code> and <code>lists</code> results formats, amongst other things. </p><p>The fourth value will be a query-information structure which contains additional information AllegroGraph gathered while executing the query. </p><p>Individual results formats are permitted to return additional values. </p><p>The following parameters are used internally by AllegroGraph and should not be used: <code>parsed-package</code>, <code>primary?</code>, <code>parent-executor</code>, <code>uuid</code>, and <code>service-db</code>. </p><p>Note that the following arguments are deprecated and should no longer be used: <code>permitted-verbs</code>, <code>extendedp</code> and <code>planner</code>. </p>
</div>
</div>
  
<a name="function.default-query-engine" id="function.default-query-engine"></a>
<a name="default-query-engine" id="default-query-engine"></a>
<div class="documentation function"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">default-query-engine</span>
<span class="documentation-arguments"><span class="marker">&amp;optional</span> &nbsp;<span class="argument">engine</span> &nbsp;<span class="argument">db</span></span>
</div>
<span class="documentation-kind">function</span>
</div>
<div class="documentation contents"><p>Returns the query-engine that will be used if no other engine is specified. </p><p>If a triple-store is opened, then the QueryEngine parameter of the AllegroGraph configuration file will be used. You can use <code>setf</code> to change the default for the current session. </p>
</div>
</div>
  
<a name="function.get-allowed-results-formats" id="function.get-allowed-results-formats"></a>
<a name="get-allowed-results-formats" id="get-allowed-results-formats"></a>
<div class="documentation function"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">get-allowed-results-formats</span>
<span class="documentation-arguments"><span class="marker">&amp;optional</span> &nbsp;<span class="argument">verb</span> &nbsp;<span class="argument">engine</span></span>
</div>
<span class="documentation-kind">function</span>
</div>
<div class="documentation contents">Returns a list of keyword symbols that are valid when applied as values of <code>results-format</code> to a query with the given <code>verb</code>. if <code>verb</code> is not provided, the intersection of <code>:ask</code> and <code>:select</code> (the two permitted values) is returned. With AllegroGraph 3.0, an additional <code>engine</code> argument is available. In a similar manner to <code>verb</code>, omitting this restricts the returned values to those that apply to all built-in query engines. 
</div>
</div>
  
<a name="function.get-allowed-rdf-formats" id="function.get-allowed-rdf-formats"></a>
<a name="get-allowed-rdf-formats" id="get-allowed-rdf-formats"></a>
<div class="documentation function"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">get-allowed-rdf-formats</span>
<span class="documentation-arguments"><span class="marker">&amp;optional</span> &nbsp;<span class="argument">verb</span> &nbsp;<span class="argument">engine</span></span>
</div>
<span class="documentation-kind">function</span>
</div>
<div class="documentation contents"><p>Returns a list of keyword symbols that are valid when applied as values of <code>rdf-format</code> to a query with the given <code>verb</code>. if <code>verb</code> is not provided, the intersection of <code>:construct</code> and <code>:describe</code> (the two permitted values) is returned. With AllegroGraph 3.0, an additional <code>engine</code> argument is available. In a similar manner to <code>verb</code>, omitting this restricts the returned values to those that apply to all built-in query engines. </p><p>Example: </p>
<ul>
<li>Get formats for <code>CONSTRUCT</code> queries executed by the algebra query engine.<p>(get-allowed-rdf-formats :construct :algebra) </p></li></ul>
</div>
</div>
  
<a name="function.valid-query-engines" id="function.valid-query-engines"></a>
<a name="valid-query-engines" id="valid-query-engines"></a>
<div class="documentation function"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">valid-query-engines</span>
</div>
<span class="documentation-kind">function</span>
</div>
<div class="documentation contents">Returns a list of keyword symbols that are valid when applied as values of the <code>engine</code> argument to <a href="#run-sparql" title="description of run-sparql">run-sparql</a> or <a href="#db-run-sparql" title="description of db-run-sparql">db-run-sparql</a>. 
</div>
</div>
  
<a name="function.get-sparql-query-engines" id="function.get-sparql-query-engines"></a>
<a name="get-sparql-query-engines" id="get-sparql-query-engines"></a>
<div class="documentation function"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">get-sparql-query-engines</span>
</div>
<span class="documentation-kind">function</span>
</div>
<div class="documentation contents">Returns a list of keyword symbols that are valid when applied as values of the <code>engine</code> argument to <a href="#run-sparql" title="description of run-sparql">run-sparql</a> or <a href="#db-run-sparql" title="description of db-run-sparql">db-run-sparql</a>. 
</div>
</div>
  <hr/><p><code>run-sparql</code> is a convenient way to call the generic function <code>db-run-sparql</code>. The latter specializes on the the triple-store class and query engine. In general, you should continue to use <a href="#run-sparql" title="description of run-sparql">run-sparql</a> in your code. </p>
<a name="function.db-run-sparql" id="function.db-run-sparql"></a>
<a name="db-run-sparql" id="db-run-sparql"></a>
<div class="documentation function"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">db-run-sparql</span>
<span class="documentation-arguments"><span class="argument">db</span> &nbsp;<span class="argument">engine</span> &nbsp;<span class="argument">query</span> &nbsp;<span class="marker">&amp;rest</span> &nbsp;<span class="argument">args</span> &nbsp;<span class="marker">&amp;key</span> &nbsp;<span class="marker">&amp;allow-other-keys</span></span>
</div>
<span class="documentation-kind">function</span>
</div>
<div class="documentation contents"><p>A generic function to dispatch query execution across different SPARQL engines and database types. </p><p>Returns values: 1) The result (depends on :results-format) 2) The SPARQL verb keyword (:select, :update, :describe, :ask) 3) A list of symbols naming variables in the result.  E.g.  (?name ?type ?friend ....) 4) A query-information struct, or nil. </p>
</div>
</div>
  <hr/><a name='header2-66' id='header2-66'></a><h2>Extension functions</h2><p>SPARQL allows for query engines to associate extension functions with URIs, and call them from within queries. </p><p>You can define your own URI functions through <code>defurifun</code>, or associate existing functions with a URI through <code>associate-function-with-uri</code>. <code>defurifun</code> does some manipulation of the arguments, so you should use it whenever possible. </p>
<a name="function.associate-function-with-uri" id="function.associate-function-with-uri"></a>
<a name="associate-function-with-uri" id="associate-function-with-uri"></a>
<div class="documentation function"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">associate-function-with-uri</span>
<span class="documentation-arguments"><span class="argument">function</span> &nbsp;<span class="argument">uri</span> &nbsp;<span class="marker">&amp;key</span> &nbsp;<span class="argument">cache-now-p</span> &nbsp;<span class="argument">db</span></span>
</div>
<span class="documentation-kind">function</span>
</div>
<div class="documentation contents">Assert a mapping between <code>uri</code>, which is a string or a valid part, and the provided <code>function</code>, which is a symbol or a function. If <code>cache-now-p</code>, and <code>function</code> is a symbol, its function binding is stored instead of the symbol itself. 
</div>
</div>
  
<a name="function.print-function-uri-mappings" id="function.print-function-uri-mappings"></a>
<a name="print-function-uri-mappings" id="print-function-uri-mappings"></a>
<div class="documentation function"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">print-function-uri-mappings</span>
<span class="documentation-arguments"><span class="marker">&amp;key</span> &nbsp;<span class="argument">stream</span> &nbsp;<span class="argument">db</span></span>
</div>
<span class="documentation-kind">function</span>
</div>
<div class="documentation contents">Print all mappings between URIs and functions to <code>stream</code> <code>*standard-output*</code> by default). 
</div>
</div>
  
<a name="macro.defurifun" id="macro.defurifun"></a>
<a name="defurifun" id="defurifun"></a>
<div class="documentation macro"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">defurifun</span>
<span class="documentation-arguments"><span class="argument">name</span> &nbsp;<span class="argument">uri</span> &nbsp;<span class="argument">args</span> &nbsp;<span class="marker">&amp;body</span> &nbsp;<span class="argument">body</span></span>
</div>
<span class="documentation-kind">macro</span>
</div>
<div class="documentation contents">Define a new function, <code>name</code>, and associate it with <code>uri</code> as with <code>associate-function-with-uri</code>. <code>args</code> is not evaluated, exactly as with <code>defun</code>. 
</div>
</div>
  <p>Here's an example: a function that will do an HTTP HEAD request against the provided URL, returning the HTTP status code as an integer literal, or 0 if there's a problem. </p><p>(The built-in functions are quite robust, so a Lisp integer will be treated as an RDF literal with data type <code>xsd:integer</code>.) </p>
<pre><code>(defurifun ex-head-request !&lt;http://example.com/fn/head&gt; (uri)  
  (or  
    (when uri  
      (ignore-errors  
        (format t "~&amp;Performing HTTP HEAD request on &lt;~A&gt;...~%"  
                  (upi-&gt;value uri))  
        (second  
          (multiple-value-list  
            (net.aserve.client:do-http-request (upi-&gt;value uri)  
                                               :method :head)))))  
    0)) </code></pre><p>You can use this function in a query exactly as you would a built-in function. </p><p>Using this data as an example: </p>
<pre><code>&lt;http://ex.com/a&gt; &lt;http://ex.com/foo&gt; "200"^^&lt;http://www.w3.org/2001/XMLSchema#integer&gt; . </code></pre><p>we can run a query like so: </p>
<pre><code>sparql(54): (run-sparql  
"  
PREFIX f: &lt;http://example.com/fn/&gt;  
SELECT ?x {  
  ?x &lt;http://ex.com/foo&gt; ?y .  
  FILTER ( ?y = f:head("http://franz.com\") )  
}"  
  :results-format :count) </code></pre><p>which produces this output: </p>
<pre><code>Performing HTTP HEAD request on &lt;http://franz.com&gt;...  
1  
:select  
(?x) </code></pre><p>&#8230; we know, then, that <code>franz.com</code> is returning a 200 status code. </p><p>Note that these filter functions can be called an arbitrary number of times during the execution of a query. It's not a good idea to actually perform expensive operations like HTTP requests in your queries. </p><a name='header2-84' id='header2-84'></a><h2>SELECT bindings and ASK results</h2><p><code>run-sparql</code> allows you programmatic access to results in a number of ways. </p><p>Any of the following results-formats are suitable as arguments to <code>SELECT</code> or <code>ASK</code> queries: </p>
<ul>
<li><code>:sparql-xml</code>, which serializes the results as XML to <code>output-stream</code>.</li>
<li><code>:sparql-json</code>, which does the same in the JSON encoding.</li>
<li><code>:sparql-ttl</code>, which does the same in the SPARQL results Turtle encoding.</li>
<li><code>:table</code>, a simple debugging format that concisely prints the results in a table. See <a href="#x:2Asparql-table-width:2A" title="description of *sparql-table-width*">*sparql-table-width*</a>.</li></ul><p>The following results-formats are suitable as arguments to <code>SELECT</code> queries: </p>
<ul>
<li><code>:arrays</code>, which returns a list of arrays, each with one entry for each results variable.</li>
<li><code>:lists</code>, which is the same but with lists instead of arrays.</li>
<li><code>:alists</code>, which is the same but with association lists instead of hash tables.</li>
<li><code>:count</code>, which returns the number of results rows.</li></ul><p>The following results-formats are suitable as arguments to <code>ASK</code> queries: </p>
<ul>
<li><code>:boolean</code>, which returns <code>t</code> or <code>nil</code> for true and false respectively.</li></ul><a name='header2-98' id='header2-98'></a><h2>Returning triples from <code>CONSTRUCT</code> and <code>DESCRIBE</code> queries</h2><p>Any of the following <code>rdf-format</code>s are suitable as arguments to <code>CONSTRUCT</code> or <code>DESCRIBE</code> queries: </p>
<ul>
<li><code>:ntriples</code>, which serializes the triples as N-Triples to <code>output-stream</code>.</li>
<li><code>:rdf/xml</code>, which does the same in RDF/XML.</li>
<li><code>:rdf-n3</code>, which does the same in the Turtle subset of Notation-3.</li></ul><p>The following <code>rdf-format</code> is suitable for <code>DESCRIBE</code> queries: </p>
<ul>
<li><code>:triples</code>, which returns a list of AllegroGraph triples.</li></ul><p>The following <code>rdf-format</code> is suitable for <code>CONSTRUCT</code> queries: </p>
<ul>
<li><code>:arrays</code>, which returns a list of three-element arrays. The elements of the array are the subject, predicate, and object of a constructed triple, and can be UPIs or <code>future-part</code>s. </li></ul><p>Finally, SPARQL can return results from <code>CONSTRUCT</code> and <code>DESCRIBE</code> queries as <em>in-memory triple stores</em>, using the <code>:in-memory</code> format. These triple-stores support the full AllegroGraph API and can therefore be queried and serialized just like a regular triple-store. When no references to them remain, they will be garbage collected just like any other Lisp data-structure. </p><p>You can use <a href="#get-allowed-results-formats" title="description of get-allowed-results-formats">get-allowed-results-formats</a> and <a href="#get-allowed-rdf-formats" title="description of get-allowed-rdf-formats">get-allowed-rdf-formats</a> to access these allowed values dynamically at run-time. </p><a name='header2-109' id='header2-109'></a><h2>Variables</h2><p>Programmatic results associate values with variables. Variables are parsed into symbols by the query parser. </p><p>The mapping from variables to symbols is straightforward, and best illustrated by example: </p>
<ul>
<li><code>?x</code>  &rarr; <code>'|?x|</code></li>
<li><code>?X</code>  &rarr; <code>'?X</code></li>
<li><code>$foo</code>  &rarr; <code>'|?foo|</code></li></ul><p>If you provide variables in a <code>with-variables</code> argument, a leading <code>?</code> is prepended to the variable name. Your queries will run correctly if you provide them as s-expressions and do not prepend <code>?</code>, but: </p>
<ul>
<li><p>variables that share a name with a self-evaluating symbol, such as <code>most-positive-fixnum</code>, <code>t</code>, or <code>nil</code>, will cause your query to fail </p></li>
<li><p>bindings you provide using <code>with-variables</code> will not apply, because they are always preprocessed. </p></li></ul><p>All variables created by the parser are interned in the current package, as if by a call to <code>cl:intern</code>. You should adhere to these rules when processing results or providing bindings using <code>with-variables</code>. </p><a name='header2-119' id='header2-119'></a><h2>SPARQL and first-class triples</h2><p>AllegroGraph permits you to make assertions about triple IDs (UPIs of type <code>triple-id</code>). SPARQL offers no support for this: only named graphs are supported. First-class triples are entirely outside the scope of both RDF and SPARQL. </p><p>SPARQL queries against stores using first-class triples are not supported. AllegroGraph's SPARQL engine makes only limited provisions for such queries: </p>
<ul>
<li><p>programmatic output is likely to work in most situations. Certain <code>FILTER</code> and <code>ORDER BY</code> operations will fail, however; typically these will result in an internal SPARQL type error, which will cause the <code>FILTER</code> to fail for all <code>triple-id</code> values. </p></li>
<li><p>output in one of the provided results formats will, under normal circumstances, fail when a <code>triple-id</code> is encountered. The SPARQL XML writer exports a variable, <code>sparql.results:*strict-sparql-xml-output*</code>, which toggles <code>triple-id</code> output. If this is set to <code>nil</code>, <code>triple-id</code> values are printed in a <code>&lt;triple&gt;</code> element, analogous to <code>&lt;literal&gt;</code>. A similar variable is exported for the JSON format: <code>*strict-sparql-json-output*</code>. The Turtle results format will always treat the <code>triple-id</code> as an integer. </p></li></ul><p>It bears repeating that SPARQL is not intended to work with first-class triples; any queries that run successfully are little more than accidents, and named graphs are a better choice in all cases. </p><a name='header2-125' id='header2-125'></a><h2>Datasets</h2><a name='header3-126' id='header3-126'></a><h3>Dataset loading</h3><p>It is sometimes useful to be able to process the SPARQL dataset &#8212; the set of URIs provided as <code>FROM</code> and <code>FROM NAMED</code> parameters &#8212; when a query is executed. AllegroGraph provides a dataset load hook for your convenience. </p><p>You may bind a function to <a href="#x:2Adataset-load-function:2A" title="description of *dataset-load-function*">*dataset-load-function*</a> to specify a default, or pass one as the <code>:load-function</code> argument to <a href="#run-sparql" title="description of run-sparql">run-sparql</a>. Passing <code>nil</code> disables the hook for that query. The argument list of the function is described in <a href="#x:2Adataset-load-function:2A" title="description of *dataset-load-function*">*dataset-load-function*</a>. </p><a name='header3-129' id='header3-129'></a><h3>Default dataset handling</h3><p>When no dataset (<code>FROM</code> and <code>FROM NAMED</code>) are provided to a query, the actual dataset against which the query is run is not defined by the SPARQL specification. AllegroGraph provides you with two options: <code>:default</code>, meaning that the default part of the dataset contains only the default graph of the store; and <code>:all</code>, whereby both the default and named parts of the dataset contain every graph in the store. </p><p>You can control the default behavior by setting <code>*default-dataset-behavior*</code> (formerly <code>*sparql-default-graph-behavior*</code>), and set the behavior for specific queries by passing the <code>:default-dataset-behavior</code> argument to <a href="#run-sparql" title="description of run-sparql">run-sparql</a>. </p><a name='header2-132' id='header2-132'></a><h2>Verbose output</h2><p>Logging output when queries are run in verbose mode is written to <code>db.agraph.query.sparql:*sparql-log-stream*</code>. This is <code>*standard-output*</code> by default. </p><a name='header2-134' id='header2-134'></a><h2>SPARQL and encoded values</h2><p>AllegroGraph offers the ability to directly encode a range of literal values &#8212; numbers, geospatial values, and more &#8212; directly within a UPI, without the overhead of a string representation as an RDF literal.  Whenever these encoded values are encountered by AllegroGraph's printing functions, and in many other situations, they are seamlessly treated as RDF literals, but with significant time and space savings. </p><p>AllegroGraph's implementation of most SPARQL and XQuery operators also handles encoded values transparently. </p><p><a name="sparql-queryoptions"></a> </p><a name='header2-138' id='header2-138'></a><h2>SPARQL Query Options</h2><p>AllegroGraph provides control over a number of internal settings by extending the SPARQL PREFIX notation. Options are changed by prepending a PREFIX of the form: </p>
<pre><code>PREFIX franzOption_optionName: &lt;franz:optionValue&gt; </code></pre><p>where <code>optionName</code> and <code>optionValue</code> are replaced by the name and value of the option being changed. </p><p>Options can also be specified in the configuration file, which is described in <a href="daemon-config.html">the Server Configuration document</a>. See <a href="daemon-config.html#QueryOption">here in that document</a> for how options are specified. </p><p>The available options are subject to change as some of them are experimental. The following is a list of the currently available options: </p><p>
<a name="query-option.authorizationBasic" id="query-option.authorizationBasic"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">authorizationBasic</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>The username and password to use for basic authorization </p><p>This is used when making a SPARQL SERVICE call. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_authorizationBasic: &lt;franz:user:password&gt; </code></pre><p>The default value is no authorization setting </p>
</div>
</div>
  
<a name="query-option.cancelQueryOnWarnings" id="query-option.cancelQueryOnWarnings"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">cancelQueryOnWarnings</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>If true, then warnings found during query parsing, planning and execution will cause a query to fail immediately rather than continuing. </p><p>Warnings include things like unknown variables in a ORDER BY clause or FILTER expression, constants in the query that cannot be in the store and so on.The possible values are: </p>
<ul>
<li>yes            - turn the option on</li>
<li>no             - turn the option off</li></ul><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_cancelQueryOnWarnings: &lt;franz:no&gt; </code></pre><p>The default value is no </p>
</div>
</div>
  
<a name="query-option.chunkProcessingAllowed" id="query-option.chunkProcessingAllowed"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">chunkProcessingAllowed</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Controls whether to use Chunk at a Time (CaaT) processing. </p><p>It can be: </p>
<ul>
<li><p><code>possibly</code> - use CaaT for unordered queries with small limits and use the single-set approach otherwise. Note that this works best when solutions are found in the first several chunks processed which means that the query can finish quickly. If a large portion of the search space must be scanned, then the single-set approach can be faster. </p></li>
<li><p><code>yes</code> - always use CaaT when possible (some query clauses like EXISTS filters and SPIN magic properties do not yet support CaaT). </p></li>
<li><p><code>no</code> - always use the single set approach and never use CaaT.</p></li></ul><p>The default value is <code>possibly</code> which means that AllegroGraph is optimizing for speed rather than space. The <code>no</code> option is focused on speed at the possible cost of higher memory use whereas the <code>yes</code> option is more constrained in memory use at the cost of slower queries. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_chunkProcessingAllowed: &lt;franz:possibly&gt; </code></pre>
</div>
</div>
 
 
<a name="query-option.chunkProcessingMemory" id="query-option.chunkProcessingMemory"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">chunkProcessingMemory</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Specifies the maximum amount of memory used by a single chunk. </p><p>Controls the size (in bytes) of the chunks used by the CaaT executor. This option takes precedence over the deprecated chunkProcessingSize option. </p><p>The minimium allowed value is 200M. </p><p>See the chunkProcessingAllowed option for additional query control. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_chunkProcessingMemory: &lt;franz:4294967296&gt; </code></pre><p>The default value is 4,294,967,296 </p>
</div>
</div>
  
<a name="query-option.chunkProcessingSize" id="query-option.chunkProcessingSize"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">chunkProcessingSize</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>(Deprecated) Specifies the chunk processing size in rows </p><p>Deprecated in favor of the <a href="#query-option.chunkProcessingMemory" title="description of query-option chunkProcessingMemory">chunkProcessingMemory</a> option. </p><p>Control the size (in rows of answers) of the chunks used by the CaaT executor. The higher the number, the larger the chunks processed will be which is both more efficient and more memory intensive. A typical value is 400000 or 1000000. </p><p>See the chunkProcessingAllowed option for additional control. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_chunkProcessingSize: &lt;franz:400000&gt; </code></pre><p>The default value is 400,000 </p>
</div>
</div>
  
<a name="query-option.clauseReorderer" id="query-option.clauseReorderer"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">clauseReorderer</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>The strategy used to reorder triple patterns in a query. </p><p>This option controls how the triple patterns in a single Basic Graph Pattern (BGP) are reordered. </p><p>The available strategies will depend on the query engine being used but will always include <code>identity</code> which tells the query planner to <em>not</em> reorder the triple patterns of the BGPs. Another common choice is <code>statistical</code> which uses the statistics of the triple-store to try to reorder clauses most efficiently. </p><p>Note that other query planning algebraic manipulations may cause BGPs in your query to be merged <em>and</em> that reordering does not extend to larger query structures (like UNION or OPTIONAL). </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_clauseReorderer: &lt;franz:statistical&gt; </code></pre><p>The clause reorderer defaults to <code>statistical</code> </p>
</div>
</div>
  
<a name="query-option.defaultAttributes" id="query-option.defaultAttributes"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">defaultAttributes</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Specify the default attributes to assign to any triple created by a SPARQL update command. </p><p>The attributes must be specified in URL encoded JSON format. So the example below is using the URL encoded form of which is the URL encoded form of {"rank": "High" }. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_defaultAttributes: &lt;franz:%7B%22rank%22%3A%20%22High%22%20%7D&gt; </code></pre><p>No attributes </p>
</div>
</div>
  
<a name="query-option.defaultDatasetBehavior" id="query-option.defaultDatasetBehavior"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">defaultDatasetBehavior</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Controls the dataset used for SPARQL queries with no FROM or FROM NAMED clauses. </p><p>The possible values are: </p>
<ul>
<li>all            - All triples will be in the FROM portion of the dataset. Triples whose graph is not the default-graph will be in a graph named by their graphs. Note that this means that triples whose graph is not the default-graph will appear in the dataset twice: once in a named graph (named by their graph slot) and again in the default graph of the dataset. </li>
<li>default        - Only triples whose graph is the default graph of the triple-store will be in the default graph of the dataset. No triples will be in the named graph portion of the dataset. </li>
<li>rdf            - Only triples whose graph is the default graph of the triple-store will be in the default graph of the dataset. Triples whose graph is not the default-graph will be in the named graph portion of the dataset. </li></ul><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_defaultDatasetBehavior: &lt;franz:all&gt; </code></pre><p>The default value is all </p>
</div>
</div>
  
<a name="query-option.diskChunkRowCount" id="query-option.diskChunkRowCount"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">diskChunkRowCount</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Specifies the number of solutions to keep in memory before writing temporary files. </p><p>This should be a number like 500000 or 100m. The larger the value, the more memory AllegroGraph will use during query processing. Smaller values can be more memory efficient but also can perform more slowly because the will be more I/O activity. </p><p>Note that this setting controls the memory used to hold completed solutions not the memory used to hold intermediate solutions. See the chunkProcessingMemory option for more details. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_diskChunkRowCount: &lt;franz:500000&gt; </code></pre><p>The default value is 500,000 </p>
</div>
</div>
  
<a name="query-option.enableDuplicateReduction" id="query-option.enableDuplicateReduction"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">enableDuplicateReduction</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Controls whether or not the SPARQL engine reduces the number of duplicate triples it processes. </p><p>If the store has no duplicate triples (based on subject, predicate, object, and graph) then this option has no effect. </p><p>SPARQL is defined on sets of triples (i.e., no duplicates) but AllegroGraph can store duplicates which can lead to duplicate rows of bindings returned by a query. </p><p>If this option is set to <code>true</code>, then AllegroGraph will ignore consecutive duplicate triples returned from the storage layer. Since the storage layer makes no guarentees on the order of triples it returns, this can lead to different results from the same query. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_enableDuplicateReduction: &lt;franz:true&gt; </code></pre><p>Duplicate reduction defaults to <code>off</code> </p>
</div>
</div>
  
<a name="query-option.fullScanWarningSize" id="query-option.fullScanWarningSize"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">fullScanWarningSize</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>The size at which AllegroGraph will log full scan warnings. </p><p>AllegroGraph will log a warning if it needs to perform a full scan and the triple-store contains more than <code>fullScanWarningSize</code> triples. </p><p>A full triple scan occurs when a query contains a free pattern (like <?s ?p ?o> ) and AllegroGraph is not able to find enough constraints on the pattern's variables. The warning does not mean that something is necessarily wrong but is an indication that AllegroGraph is being forced to perform significant filesystem I/O if the database does not fit in memory. </p><p>Setting the value larger than the triple-store's size will prevent the warning from appearing in the log. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_fullScanWarningSize: &lt;franz:1000000&gt; </code></pre><p>The default value is 1,000,000 </p>
</div>
</div>
  
<a name="query-option.logLineLength" id="query-option.logLineLength"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">logLineLength</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Controls the length of query log lines. </p><p>The <code>logLineLength</code> query option limits the maximum length of each line of the query log. This can make the log easier to read at the cost of removing some information. </p><p>See the <code>logQuery</code> option for more details. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_logLineLength: &lt;franz:512&gt; </code></pre><p>The default value is 512 </p>
</div>
</div>
  
<a name="query-option.logQuery" id="query-option.logQuery"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">logQuery</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Controls whether or not query execution details are logged. </p><p>logQuery can be 'no', 'yes', or 'onFailure'. </p><p>The length of the log lines can be limited by using the <code>logLineLength</code> query log option. </p><p>If logging is on, the query engine prints additional information to the AllegroGraph log file as it plans and executes a query. If logging is <code>onFailure</code>, then query log information is gathered but not emitted unless there is a query failure. </p><p>Logging on failure has a small cost especially when the amount of data logged is high (e.g., when chunkProcessingAllowed is turned on). We recommend setting the value to <code>onFailure</code> during development and then turning it to <code>no</code> for production. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_logQuery: &lt;franz:no&gt; </code></pre><p>The default value is no </p>
</div>
</div>
  
<a name="query-option.maximumSolutionsSize" id="query-option.maximumSolutionsSize"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">maximumSolutionsSize</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Specifies an upper limit on the number of solutions that are allowed during query processing before a warning is logged. </p><p>Queries run best when the solution space is kept small. This warning is in an indication that a query is generating many intermediate results. This is a normal part of query processing but can indicate that a query should be optimized </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_maximumSolutionsSize: &lt;franz:100k&gt; </code></pre><p>The default is to warn when the intermediate solution space is larger than 100,000,000 solutions </p>
</div>
</div>
  
<a name="query-option.maximumValuesCountForService" id="query-option.maximumValuesCountForService"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">maximumValuesCountForService</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>This option limits the number of VALUES that AllegroGraph will send to a SPARQL endpoint when executing a SERVICE clause. Sending partial results to the endpoint can help it answer the query more quickly but if the number of partial results is very large, the cost of data transfer can offset the help of supplying the data. </p><p>If the number of VALUES exceeds the limit, the the query will be sent to the endpoint with no VALUES supplied. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_maximumValuesCountForService: &lt;franz:1048576&gt; </code></pre><p>no limit </p>
</div>
</div>
  
<a name="query-option.memoryExhaustionWarningPercentage" id="query-option.memoryExhaustionWarningPercentage"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">memoryExhaustionWarningPercentage</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Specify how much system memory must be free for a query to continue. </p><p>If the query process is using more than this setting's percentage of total physical memory, then the query will be canceled.  The default value is 90%. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_memoryExhaustionWarningPercentage: &lt;franz:90.0&gt; </code></pre><p>The default value is 90.0 </p>
</div>
</div>
  
<a name="query-option.memoryLimit" id="query-option.memoryLimit"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">memoryLimit</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Specifies the memory limit per query. </p><p>If a query tries to use more than this, it will be canceled. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_memoryLimit: &lt;franz:8G&gt; </code></pre><p>The default value will be 85% of the physical memory on the server </p>
</div>
</div>
  
<a name="query-option.presentationTimeZone" id="query-option.presentationTimeZone"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">presentationTimeZone</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>The timezone in which xsd:dateTimes and xsd:times are serialized. </p><p>For example, if presentationTimeZone is "-02:00", then "2013-10-01T15:21:23+03:00" is serialized as "2013-10-01T10:21:23-02:00". Zoneless xsd:datetimes and xsd:times are always presented without a timezone. This option has no effect on what is stored in the database. The allowed values are strings representing the timezone. The format of these strings is the same as in xsd:dateTimes. The special value "none" means that no conversion will take place. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_presentationTimeZone: &lt;franz:-5:00&gt; </code></pre><p>The default is set to <code>none</code>. </p>
</div>
</div>
  
<a name="query-option.queryEngine" id="query-option.queryEngine"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">queryEngine</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Specifies the query engine to use when executing queries. </p><p>For example, to use the SPARQL 1.1 query engine, set this to :sparql-1.1. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_queryEngine: &lt;franz:sparql-1.1&gt; </code></pre><p>The default value is <code>sparql-1.1</code> </p>
</div>
</div>
  
<a name="query-option.queryTimeout" id="query-option.queryTimeout"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">queryTimeout</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Specifies a query timeout value in seconds. </p><p>Note that the timeout is not an interrupt; AllegroGraph checks for query timeout relatively infrequently so that a query can run for many seconds longer than the specified timeout. This is especially true for operations involving reasoning or non-triple-pattern based queries like free-text indexing or SNA path planning operators. </p><p>Setting the timeout to zero is the same as having no timeout. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_queryTimeout: &lt;franz:30&gt; </code></pre><p>The default is to have no query timeout. I.e., queries will run until complete. </p>
</div>
</div>
  
<a name="query-option.reorderDuringExecution" id="query-option.reorderDuringExecution"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">reorderDuringExecution</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Controls whether or not AllegroGraph interleaves query execution and triple-pattern selection. </p><p>If <code>no</code>, then AllegroGraph will perform all reordering during query planning. If <code>yes</code>, then AllegroGraph will defer reordering until query execution time. In many cases, the additional information available at execution time can enhance query performance. </p><p>Note that interleaving reordering is not always a win because performing all ordering at query planning time allows for the query engine to introduce joins which can sometimes enhance query performance. </p><p>See the <code>clauseReorderer</code> option for additional informationThe possible values are: </p>
<ul>
<li>yes            - turn the option on</li>
<li>no             - turn the option off</li></ul><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_reorderDuringExecution: &lt;franz:no&gt; </code></pre><p>The default value is no </p>
</div>
</div>
  
<a name="query-option.serviceTimeout" id="query-option.serviceTimeout"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">serviceTimeout</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>The number of seconds to wait before a remote query times out. </p><p>This will also have an effect on SPARQL Federated query (i.e., using the SERVICE clause). </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_serviceTimeout: &lt;franz:120&gt; </code></pre><p>The default value is 120 </p>
</div>
</div>
  
<a name="query-option.solrQueryLimit" id="query-option.solrQueryLimit"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">solrQueryLimit</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Specifies the maximum number of results to return from a given SOLR query. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_solrQueryLimit: &lt;franz:100&gt; </code></pre><p>The default value is 100 </p>
</div>
</div>
  
<a name="query-option.temporaryFilesystemSpaceLimit" id="query-option.temporaryFilesystemSpaceLimit"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">temporaryFilesystemSpaceLimit</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Specifies the maximum amount of temporary file space that may be used by a query. </p><p>If a query tries to use more file space than this, it will be canceled. </p><p>Queries write intermediate results to the filesystem when they will not fit in memory. With a huge query it is possible for such temporary files to fill the filesystem. In order to prevent this, the temporaryFilesystemSpaceLimit query option may be set. </p><p>The minimum allowable value for this setting is 2-gigabytes. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_temporaryFilesystemSpaceLimit: &lt;franz:957040640&gt; </code></pre><p>The default value is to use the minimum of 8-gigabytes and one quarter of the available filesystem space at the time the query begins. </p>
</div>
</div>
  
<a name="query-option.trustEncodedDatatypesForRangeQueries" id="query-option.trustEncodedDatatypesForRangeQueries"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">trustEncodedDatatypesForRangeQueries</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>If yes, then range queries will <em>not</em> scan typed literal triples. </p><p>This means that only encoded triples will be considered. The only reason to set this option to <code>no</code> is if your triple-store contains typed literals that are not encoded (i.e., that are in the string-table) which could happen if you disabled AllegroGraph's datatype mapping.The possible values are: </p>
<ul>
<li>yes            - turn the option on</li>
<li>no             - turn the option off</li></ul><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_trustEncodedDatatypesForRangeQueries: &lt;franz:yes&gt; </code></pre><p>The default value is yes </p>
</div>
</div>
  
<a name="query-option.trustPredicateTypeMappingsForRangeQueries" id="query-option.trustPredicateTypeMappingsForRangeQueries"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">trustPredicateTypeMappingsForRangeQueries</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>If yes, then predicate type mappings will be used for range queries. </p><p>This means that any triples whose encoded data-type does <em>not</em> match their predicate mapping will be ignored. This could happen only if a predicate mapping was added or changed after triples had been added.The possible values are: </p>
<ul>
<li>yes            - turn the option on</li>
<li>no             - turn the option off</li></ul><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_trustPredicateTypeMappingsForRangeQueries: &lt;franz:yes&gt; </code></pre><p>The default value is yes </p>
</div>
</div>
  
<a name="query-option.usePredicateConstrainedUpiTypeInformation" id="query-option.usePredicateConstrainedUpiTypeInformation"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">usePredicateConstrainedUpiTypeInformation</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Use subject and object UPI type-codes to improve constraint inference </p><p>If yes, then the query engine will gather information about the subjects and objects associated with particular predicates. This can be used in constraint analysis and query transformations. As an example, suppose we have a query like: </p>
<pre><code>?one ex:date ?date1 .  
?two ex:date ?date2 .  
filter( ?date1 &gt; ?date2 ) </code></pre><p>If there is no predicate type-mapping, then the query engine can not make any assumptions about the range comparison.  If there is a predicate type-mapping and <code>trustPredicateTypeMappingsForRangeQueries</code> is true, then the engine can know that the filter can be treated as a date comparison. If <code>usePredicateConstrainedUpiTypeInformation</code> is yes, then the query engine will check the triple-store to determine which UPI type-codes the subjects and objects associated with <code>ex:date</code> can take on. If the objects of <code>ex:date</code> only have, e.g., UPI type-code +rdf-date+, then the filter will be handled more efficiently. </p><p>The type-code information is cached but if the store is changing rapidly, then the cache will often be invalid and this computation will slightly add to the cost of queries.The possible values are: </p>
<ul>
<li>yes            - turn the option on</li>
<li>no             - turn the option off</li></ul><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_usePredicateConstrainedUpiTypeInformation: &lt;franz:yes&gt; </code></pre><p>The default value is yes </p>
</div>
</div>
  
<a name="query-option.usePredicateConstrainedXsdTypeInformation" id="query-option.usePredicateConstrainedXsdTypeInformation"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">usePredicateConstrainedXsdTypeInformation</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Use typed-literal XSD types to improve constraint inference. </p><p>Similar to usePredicateConstrainedUpiTypeInformation but involves a scan of all typed-literals (which can be expensive). This is currently not cached!The possible values are: </p>
<ul>
<li>yes            - turn the option on</li>
<li>no             - turn the option off</li></ul><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_usePredicateConstrainedXsdTypeInformation: &lt;franz:no&gt; </code></pre><p>The default value is no </p>
</div>
</div>
  
<a name="query-option.userAttributes" id="query-option.userAttributes"></a>
<div class="documentation query-option"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">userAttributes</span>
</div>
<span class="documentation-kind">query-option</span>
</div>
<div class="documentation contents"><p>Specify the user attributes to use while evaluating the query. </p><p>The attributes must be specified in URL encoded JSON format. So the example below is using the URL encoded form of {"access-level": "medium", "department": "hr"}. </p><p>Example Prefix: </p>
<pre><code>PREFIX franzOption_userAttributes: &lt;franz:%7B%22access-level%22%3A%20%22medium%22%2C%20%22department%22%3A%20%22hr%22%7D&gt; </code></pre><p>empty </p>
</div>
</div>
    </p><p><a name="query-warnings"></a> </p><a name='header2-146' id='header2-146'></a><h2>Query Warnings</h2><p>SPARQL is relatively lax when it comes to accepting and evaluating queries. For example, this query is valid SPARQL but it is probably <em>not</em> what was intended <code>?variableIsNotBound</code> is not actually bound by the triple patterns in the rest of the query: </p>
<pre><code>select ?variableIsNotBound {  
  ?s ?p ?o .  
} </code></pre><p>A more typical example could be caused by a typo. For example, changing the case of a variable: </p>
<pre><code>select ?subjectOne ?class {  
 ?subjectone rdf:type ?Class .  
} </code></pre><p>Neither <code>?subjectOne</code> nor <code>?class</code> will be bound since the query uses <code>?subjectone</code> and <code>?Class</code>. When AllegroGraph plans and executes a query, it will detect problems like the above and generate query warnings. The <a href="#query-option.cancelQueryOnWarnings">cancelQueryOnWarnings</a> query option can be used to stop execution immediately when any warnings are found. </p><p>The following is a list of the currently defined warnings: </p><p>
<a name="query-warning.warn-bgp-cross-product" id="query-warning.warn-bgp-cross-product"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-bgp-cross-product</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning indicates that one or more basic graph patterns (BGPs) in the query create a cross product. I.e., there are patterns in the query that have disjoint sets of variables which will cause the SPARQL engine to find all possible matches between the sets which can lead to very large solution sets. For example: </p>
<pre><code>SELECT * {  
  ?a ?b ?c .  
  ?d ?e ?f .  
} </code></pre><p>Since the first triple-pattern and the second triple-pattern share no variables, the above query will find all possible combinations of each pair of triples in the underlying repository. </p>
</div>
</div>
  
<a name="query-warning.warn-dataset-graph-not-found" id="query-warning.warn-dataset-graph-not-found"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-dataset-graph-not-found</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning is signaled when a query specifies a DATASET and one or more graphs in its FROM or FROM NAMED portions are not in the repository. </p><p>For example, if '<a href="http://example#22">http://example#22</a>` is not in the repository, then these queries will signal the warning: </p>
<pre><code>SELECT *  
FROM &lt;http://example#1&gt;  
FROM &lt;http://example#22&gt; {  
  ?s ?p ?o .  
}  
 
SELECT *  
FROM NAMED &lt;http://example#22&gt; {  
  ?s ?p ?o .  
} </code></pre>
</div>
</div>
 
 
<a name="query-warning.warn-differing-limits" id="query-warning.warn-differing-limits"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-differing-limits</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning is signaled when the query string contains a LIMIT and a limit is also specified in the call to SPARQL (e.g., from the parameters to <code>run-sparql</code> or in the HTTP request), and these two values do not match. When this happens, the smaller of the two values is used. 
</div>
</div>
  
<a name="query-warning.warn-differing-offsets" id="query-warning.warn-differing-offsets"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-differing-offsets</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning is signaled when the query string contains an OFFSET and an offset is also specified in the call to SPARQL (e.g., from the parameters to <code>run-sparql</code> or in the HTTP request). In this case, the sum of the two offsets will be used. 
</div>
</div>
  
<a name="query-warning.warn-empty-bind-clause" id="query-warning.warn-empty-bind-clause"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-empty-bind-clause</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning is signaled when a SPARQL query uses BIND in such a way that no solutions are available to be processed. For example, the BIND in this query appears before anything else so there is nothing for it to do and <code>?X</code> will always be unbound: </p>
<pre><code>SELECT * {  
  BIND(?object as ?X)  
  ?s ?p ?object .  
} </code></pre>
</div>
</div>
 
 
<a name="query-warning.warn-fullscan" id="query-warning.warn-fullscan"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-fullscan</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning indicates that a SPARQL query required a full scan of the repository with ~:d triples. You can modify the fullScanWarningSize query option to suppress the warning if desired. 
</div>
</div>
  
<a name="query-warning.warn-graph-not-in-dataset" id="query-warning.warn-graph-not-in-dataset"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-graph-not-in-dataset</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning is signaled when a query uses a DATASET and the graph of a GRAPH clause is not in its FROM NAMED portion. For example </p>
<pre><code>SELECT *  
FROM NAMED &lt;http://graph1&gt;  
FROM NAMED &lt;http://graph2&gt; {  
  GRAPH &lt;http://example#22&gt; {  
    ?s ?p ?o  
  }  
} </code></pre>
</div>
</div>
 
 
<a name="query-warning.warn-impossible-atomic-constraint" id="query-warning.warn-impossible-atomic-constraint"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-impossible-atomic-constraint</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning occurs when a FILTER expression can be determined to be impossible at plan time. For example, <code>FILTER ( false )</code> can never succeed. 
</div>
</div>
  
<a name="query-warning.warn-impossible-freetext-query" id="query-warning.warn-impossible-freetext-query"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-impossible-freetext-query</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning is signaled for queries that use AllegroGraph's freetext search Magic Properties when it can be determined that such a query cannot succeed. For example, if the search expression contains only stop words (which are not indexed), then the expression cannot match. 
</div>
</div>
  
<a name="query-warning.warn-impossible-in-constraint" id="query-warning.warn-impossible-in-constraint"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-impossible-in-constraint</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning is signaled when an IN expression has an empty list. For example <code>FILTER( ?x IN ( ) )</code>. 
</div>
</div>
  
<a name="query-warning.warn-impossible-language-literal-constraint" id="query-warning.warn-impossible-language-literal-constraint"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-impossible-language-literal-constraint</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning indicates that a FILTER expression puts invalid constraints on the language of a variable. For example: </p>
<pre><code>SELECT * { ?s ?p ?o . FILTER( LANG(?o) = 'es' &amp;&amp; LANG(?o) = 'en') } </code></pre><p>cannot succeed because the LANG(?o) cannot be both 'es' and 'en'. </p>
</div>
</div>
  
<a name="query-warning.warn-impossible-literal-equivalence" id="query-warning.warn-impossible-literal-equivalence"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-impossible-literal-equivalence</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning is signaled when a FILTER expression uses a literal equivalence which cannot succeed. For example, if the repository does not contain the literal 'tinker, tailer, soldier, spy', then a query like this is bound to fail: <code>... ?s ?p ?o . FILTER( ?o = 'tinker, tailer, soldier, spy' )</code> 
</div>
</div>
  
<a name="query-warning.warn-impossible-membership-constraint" id="query-warning.warn-impossible-membership-constraint"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-impossible-membership-constraint</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning is signaled when a FILTER expression cannot succeed because the repository does not contain any of the values that would need to be matched. For example, assume that the repository does not contain any triples with either 'one two three' or 'hard fruitcake'. In this case, these queries will signal the warning: </p>
<pre><code>SELECT * {  
  ?s ?p ?o .  
  FILTER( ?o IN ( 'one two three', 'hard fruitcake' )  
}  
 
SELECT * {  
  VALUES ?o { 'one two three' 'hard fruitcake' }  
  ?s ?p ?o .  
} </code></pre>
</div>
</div>
 
 
<a name="query-warning.warn-impossible-range-constraint" id="query-warning.warn-impossible-range-constraint"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-impossible-range-constraint</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning is signaled when a range constraint cannot succeed because the set of possible values is empty. For example, this FILTER can never succeed: <code>FILTER( ?o &gt; 3 &amp;&amp; ?o &lt; 0 )</code>. 
</div>
</div>
  
<a name="query-warning.warn-impossible-str-literal-constraint" id="query-warning.warn-impossible-str-literal-constraint"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-impossible-str-literal-constraint</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning indicates that a FILTER expression cannot succeed because it is comparing a string with a non-string. E.g., </p>
<pre><code>SELECT * { ?s ?p ?o . FILTER( STR(?o) = 45 ) } </code></pre>
</div>
</div>
 
 
<a name="query-warning.warn-invalid-triples-generated" id="query-warning.warn-invalid-triples-generated"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-invalid-triples-generated</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning is signaled at query time when a CONSTRUCT or UPDATE template generates invalid RDF triples. For example, this query will emit no triples because <code>?s</code> takes on only literal bindings and these are not valid in the subject position: </p>
<pre><code>CONSTRUCT {  
  ?s a example:Car .  
} WHERE {  
  VALUES ?s { 'mazda 3' 'ford pinto' 'bmw 300i' }  
} </code></pre>
</div>
</div>
 
 
<a name="query-warning.warn-invalid-triples-in-template" id="query-warning.warn-invalid-triples-in-template"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-invalid-triples-in-template</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning is signaled when a CONSTRUCT or UPDATE template has triple patterns in it that are not valid RDF. For example, a triple pattern may not have a literal in the subject position. 
</div>
</div>
  
<a name="query-warning.warn-join-cross-product" id="query-warning.warn-join-cross-product"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-join-cross-product</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning indicates that the query algebra contains one or more cross products. I.e., there are portions of the algebra that have disjoint sets of variables which will cause the SPARQL engine to find all possible matches between the sets which can lead to very large solution sets. For example: </p>
<pre><code>SELECT * {  
  ?a a ?type .  
  VALUES ?FOO { &lt;ex://a&gt; &lt;ex://b&gt; }  
} </code></pre><p>Since the triple-pattern and the VALUES clause share no variables, the above query will find all possible combinations from the two sets. </p>
</div>
</div>
  
<a name="query-warning.warn-literal-graph-clause" id="query-warning.warn-literal-graph-clause"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-literal-graph-clause</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning is signaled if a GRAPH clause specifies a literal for the GRAPH. For example: </p>
<pre><code>SELECT * {  
  GRAPH ?g {  
    ?s ?p ?o .  
  }  
  BIND( 'literal' as ?g )  
} </code></pre>
</div>
</div>
 
 
<a name="query-warning.warn-literal-variable-required" id="query-warning.warn-literal-variable-required"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-literal-variable-required</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning is signaled when a FILTER expression cannot succeed because a variable in it is known to be a resource or blank node and the expression requires it to be a literal. For example <code>?s ?p ?o . FILTER( ?s = 34 )</code> must fail because <code>?s</code> is bound to the subject of a triple and subjects cannot be literals. 
</div>
</div>
  
<a name="query-warning.warn-range-constraint-cannot-be-satisfied" id="query-warning.warn-range-constraint-cannot-be-satisfied"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-range-constraint-cannot-be-satisfied</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning is signaled when a range constraint cannot succeed because AllegroGraph has determined that the repository does not contain any matching triples. 
</div>
</div>
  
<a name="query-warning.warn-range-filter-predicate-mapping-mismatch" id="query-warning.warn-range-filter-predicate-mapping-mismatch"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-range-filter-predicate-mapping-mismatch</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning is signaled when a predicate has a <a href="lisp-reference.html#ref-type-mapping">type mapping</a> which does not match the datatype of the values used in a range FILTER. For example, if <code>&lt;http://example#age&gt;</code> has a mapping to <code>xsd:byte</code>, then this query will signal the warning: </p>
<pre><code>SELECT * {  
  ?s &lt;http://example#age&gt; ?age .  
  FILTER( ?age &gt; '2001-10-15'^^xsd:date )  
} </code></pre><p>because the FILTER cannot succeed. </p>
</div>
</div>
  
<a name="query-warning.warn-repeated-projected-variables-ignored" id="query-warning.warn-repeated-projected-variables-ignored"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-repeated-projected-variables-ignored</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">
</div>
</div>
 
<a name="query-warning.warn-service-variable-is-unbound" id="query-warning.warn-service-variable-is-unbound"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-service-variable-is-unbound</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning indicates that the query contains a SERVICE clause with a variable HOST and the HOST variable is not bound by the rest of the query. 
</div>
</div>
  
<a name="query-warning.warn-sparql-type-errors" id="query-warning.warn-sparql-type-errors"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-sparql-type-errors</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning is signaled when SPARQL type errors are encountered during query evaluation. Examples of type errors include trying to add a number to a date, trying to compare a string with a time, etc. 
</div>
</div>
  
<a name="query-warning.warn-unknown-constants" id="query-warning.warn-unknown-constants"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-unknown-constants</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning is signaled when a query uses constants that are not in the repository. For example, if 'tinker, tailer, soldier, spy' is not in the repository, then this query cannot succeed: </p>
<pre><code>SELECT * { ?s ?p 'tinker, tailer, soldier, spy' . } </code></pre><p>Similarly for this query: </p>
<pre><code>SELECT * { ?s ?p ?o . FILTER( ?o = 'tinker, tailer, soldier, spy' ) } </code></pre>
</div>
</div>
 
 
<a name="query-warning.warn-unknown-variables" id="query-warning.warn-unknown-variables"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-unknown-variables</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents"><p>This warning is signaled when it can be determined that a variable used in an expression is not bound anywhere in the query. Examples include: </p>
<pre><code>SELECT * { ?s ?p ?o . } ORDER BY ?missing  
 
SELECT * { ?s ?p ?o . FILTER( ?missing &gt; 5 )  
 
CONSTRUCT { ?missing ?p ?o } WHERE { ?s ?p ?o } </code></pre><p>and so on. </p>
</div>
</div>
  
<a name="query-warning.warn-unused-bind-variable" id="query-warning.warn-unused-bind-variable"></a>
<div class="documentation query-warning"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">warn-unused-bind-variable</span>
</div>
<span class="documentation-kind">query-warning</span>
</div>
<div class="documentation contents">This warning is signaled when a variable in a BIND expression is not used elsewhere in the query. 
</div>
</div>
    </p><p><a name="sparql-functions-list"></a> </p><a name='header2-155' id='header2-155'></a><h2>SPARQL functions</h2><p>AllegroGraph supports the entire standard set of functions specified in the <a href="http://www.w3.org/TR/sparql11-query/">W3C SPARQL reference</a>. It also supports several XPath constructor functions, XPath mathematical functions, and a number of custom functions designed to help with using AllegroGraph's extensions such as Geospatial and Social Network Analysis. </p><p><h3>XPath Constructor Functions</h3> <p>AllegroGraph supports the standard SPARQL casting operations. For details, refer to the <a href="http://www.w3.org/TR/sparql11-query/">SPARQL reference</a> for more details.</p> 
<ul>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#boolean&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#byte&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#date&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#decimal&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#double&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#float&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#int&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#integer&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#long&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#short&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#string&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#time&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#unsignedByte&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#unsignedInt&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#unsignedLong&gt;</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#FunctionMapping'>&lt;http://www.w3.org/2001/XMLSchema#unsignedShort&gt;</a>  ( a ) </li></ul><h3>Functions on Dates and Times</h3> 
<ul>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-day'>day</a>  ( dateTime ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-hours'>hours</a>  ( dateTime ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-minutes'>minutes</a>  ( dateTime ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-month'>month</a>  ( dateTime ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-now'>now</a>  (  ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-seconds'>seconds</a>  ( dateTime ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-timezone'>timezone</a>  ( dateTime ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-tz'>tz</a>  ( dateTime ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-year'>year</a>  ( dateTime ) </li></ul><h3>Hash Functions</h3> 
<ul>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-md5'>md5</a>  ( string ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-sha1'>sha1</a>  ( string ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-sha256'>sha256</a>  ( string ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-sha384'>sha384</a>  ( string ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-sha512'>sha512</a>  ( string ) </li></ul><h3>Functions on Numerics</h3> 
<ul>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-abs'>abs</a>  ( number ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-ceil'>ceil</a>  ( number ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-floor'>floor</a>  ( number ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-rand'>rand</a>  (  ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-round'>round</a>  ( number ) </li></ul><h3>SPARQL Operators</h3> <p>These functions are described in detail in the Operator Mappings section of the W3C SPARQL reference.</p> 
<ul>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'>!=</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'>*</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'>+</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'>+</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'>-</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'>-</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'>/</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'>/</a>  ( a ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'><</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'><=</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'>=</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'>&gt;</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#OperatorMapping'>&gt;=</a>  ( a, b ) </li></ul><h3>Functions on RDF terms</h3> 
<ul>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-bnode'>bnode</a>  ( identifier ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-bnode'>bnode</a>  (  ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-datatype'>datatype</a>  ( literal ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-iri'>iri</a>  ( iri ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-isBlank'>isBlank</a>  ( rdf-term ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-isIRI'>isIRI</a>  ( rdf-term ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-isLiteral'>isLiteral</a>  ( rdf-term ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-isNumeric'>isNumeric</a>  ( rdf-term ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-isURI'>isURI</a>  ( rdf-term ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-lang'>lang</a>  ( literal ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-str'>str</a>  ( literal ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-strdt'>strdt</a>  ( literal, datatype ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-strlang'>strlang</a>  ( literal, language ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-struuid'>struuid</a>  (  ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-uri'>uri</a>  ( iri ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-uuid'>uuid</a>  (  ) </li></ul><h3>Functional Forms</h3> 
<ul>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-RDFterm-equal'>RDFterm-equal</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-bound'>bound</a>  ( uri ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-coalesce'>coalesce</a>  ( ... ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-exists'>exists</a>  ( pattern ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-if'>if</a>  ( expression, then ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-if'>if</a>  ( expression, then, else ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-in'>in</a>  ( expression, ... ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-logical-and'>logical-and</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-logical-or'>logical-or</a>  ( a, b ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-not-in'>not in</a>  ( expression, ... ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-not-exists'>not-exists</a>  ( pattern ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-sameTerm'>sameTerm</a>  ( a, b ) </li></ul><h3>Functions on Strings</h3> 
<ul>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-concat'>concat</a>  ( ... ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-contains'>contains</a>  ( string-literal1, string-literal2 ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-encode'>encode_for_uri</a>  ( string-literal ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-langMatches'>langMatches</a>  ( language-tag, language-range ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-lcase'>lcase</a>  ( string-literal ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-regex'>regex</a>  ( target, regex ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-regex'>regex</a>  ( target, regex, flags ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-replace'>replace</a>  ( literal, pattern, replacement, flags ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-replace'>replace</a>  ( literal, pattern, replacement ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-strafter'>strafter</a>  ( string-literal1, string-literal2 ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-strbefore'>strbefore</a>  ( string-literal1, string-literal2 ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-strends'>strends</a>  ( string-literal1, string-literal2 ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-strlen'>strlen</a>  ( string-literal ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-strstarts'>strstarts</a>  ( string-literal1, string-literal2 ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-substr'>substr</a>  ( string-literal, start, length ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-substr'>substr</a>  ( string-literal, start ) </li>
<li><a href='https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#func-ucase'>ucase</a>  ( string-literal ) </li></ul>  </p><a name='header3-158' id='header3-158'></a><h3>Supported XPath functions</h3><p>AllegroGraph also supports several XPath functions: </p><p><h3>Functions on Dates and Times</h3> 
<ul>
<li><a href='http://www.w3.org/2005/xpath-functions#current-date'>&lt;http://www.w3.org/2005/xpath-functions#current-date&gt;</a>  (  ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#current-dateTime'>&lt;http://www.w3.org/2005/xpath-functions#current-dateTime&gt;</a>  (  ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#current-time'>&lt;http://www.w3.org/2005/xpath-functions#current-time&gt;</a>  (  ) </li></ul><h3>XPath Mathematical Functions</h3> <p>For additional details on the XPath mathematical functions, see <a href="https://www.w3.org/TR/xpath-functions-3/">https://www.w3.org/TR/xpath-functions-3/</a>.</p> 
<ul>
<li><a href='http://www.w3.org/2005/xpath-functions/math#acos'>&lt;http://www.w3.org/2005/xpath-functions/math#acos&gt;</a>  ( x ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#asin'>&lt;http://www.w3.org/2005/xpath-functions/math#asin&gt;</a>  ( x ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#atan'>&lt;http://www.w3.org/2005/xpath-functions/math#atan&gt;</a>  ( x ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#atan2'>&lt;http://www.w3.org/2005/xpath-functions/math#atan2&gt;</a>  ( x, y ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#cos'>&lt;http://www.w3.org/2005/xpath-functions/math#cos&gt;</a>  ( x ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#exp'>&lt;http://www.w3.org/2005/xpath-functions/math#exp&gt;</a>  ( x ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#exp10'>&lt;http://www.w3.org/2005/xpath-functions/math#exp10&gt;</a>  ( x ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#log'>&lt;http://www.w3.org/2005/xpath-functions/math#log&gt;</a>  ( x ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#log10'>&lt;http://www.w3.org/2005/xpath-functions/math#log10&gt;</a>  ( x ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#pi'>&lt;http://www.w3.org/2005/xpath-functions/math#pi&gt;</a>  (  ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#pow'>&lt;http://www.w3.org/2005/xpath-functions/math#pow&gt;</a>  ( x, y ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#sin'>&lt;http://www.w3.org/2005/xpath-functions/math#sin&gt;</a>  ( x ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#sqrt'>&lt;http://www.w3.org/2005/xpath-functions/math#sqrt&gt;</a>  ( x ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions/math#tan'>&lt;http://www.w3.org/2005/xpath-functions/math#tan&gt;</a>  ( x ) </li></ul><h3>Miscellaneous functions</h3> 
<ul>
<li><a href='http://www.w3.org/2005/xpath-functions#compare'>&lt;http://www.w3.org/2005/xpath-functions#compare&gt;</a>  ( a, b ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#error'>&lt;http://www.w3.org/2005/xpath-functions#error&gt;</a>  ( ... ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#false'>&lt;http://www.w3.org/2005/xpath-functions#false&gt;</a>  (  ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#not'>&lt;http://www.w3.org/2005/xpath-functions#not&gt;</a>  ( a ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#true'>&lt;http://www.w3.org/2005/xpath-functions#true&gt;</a>  (  ) </li></ul><h3>Functions on Numerics</h3> 
<ul>
<li><a href='http://www.w3.org/2005/xpath-functions#abs'>&lt;http://www.w3.org/2005/xpath-functions#abs&gt;</a>  ( a ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#ceil'>&lt;http://www.w3.org/2005/xpath-functions#ceil&gt;</a>  ( a ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#floor'>&lt;http://www.w3.org/2005/xpath-functions#floor&gt;</a>  ( a ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#round'>&lt;http://www.w3.org/2005/xpath-functions#round&gt;</a>  ( a ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#round-half-to-even'>&lt;http://www.w3.org/2005/xpath-functions#round-half-to-even&gt;</a>  ( a ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#round-half-to-even'>&lt;http://www.w3.org/2005/xpath-functions#round-half-to-even&gt;</a>  ( a, b ) </li></ul><h3>Functions on Strings</h3> 
<ul>
<li><a href='http://www.w3.org/2005/xpath-functions#concat'>&lt;http://www.w3.org/2005/xpath-functions#concat&gt;</a>  ( a, b, ... ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#contains'>&lt;http://www.w3.org/2005/xpath-functions#contains&gt;</a>  ( string-literal1, string-literal2 ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#ends-with'>&lt;http://www.w3.org/2005/xpath-functions#ends-with&gt;</a>  ( string-literal1, string-literal2 ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#lower-case'>&lt;http://www.w3.org/2005/xpath-functions#lower-case&gt;</a>  ( string-literal ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#normalize-space'>&lt;http://www.w3.org/2005/xpath-functions#normalize-space&gt;</a>  (  ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#normalize-space'>&lt;http://www.w3.org/2005/xpath-functions#normalize-space&gt;</a>  ( string-literal ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#starts-with'>&lt;http://www.w3.org/2005/xpath-functions#starts-with&gt;</a>  ( string-literal1, string-literal2 ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#string-length'>&lt;http://www.w3.org/2005/xpath-functions#string-length&gt;</a>  (  ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#string-length'>&lt;http://www.w3.org/2005/xpath-functions#string-length&gt;</a>  ( string-literal ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#substring'>&lt;http://www.w3.org/2005/xpath-functions#substring&gt;</a>  ( string-literal, start, length ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#substring'>&lt;http://www.w3.org/2005/xpath-functions#substring&gt;</a>  ( string-literal, start ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#translate'>&lt;http://www.w3.org/2005/xpath-functions#translate&gt;</a>  ( string-literal, from, to ) </li>
<li><a href='http://www.w3.org/2005/xpath-functions#upper-case'>&lt;http://www.w3.org/2005/xpath-functions#upper-case&gt;</a>  ( string-literal ) </li></ul>  </p><p><a name="sparql-functions-list"></a> </p><a name='header3-162' id='header3-162'></a><h3>AllegroGraph extensions</h3><p>AllegroGraph supports several functions above and beyond those defined by the <a href="http://www.w3.org/TR/sparql11-query/">SPARQL standard</a>. The additional functions are named by URI (or prefixed name) and can appear anywhere in a SPARQL expression (e.g., in a BIND, a FILTER, an ORDER BY, etc.). </p><h4>nD Geospatial</h4><p>These functions are useful in working with AllegroGraph <a href="geospatial-nd.html">nD-geospatial</a> facilities: </p><p>
<ul>
<li><a href='http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLatLonLatLon'>&lt;http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLatLonLatLon&gt;</a>  ( lat1, lon1, lat2, lon2, [  units ] ) </li>
<li><a href='http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLatLonLatLon'>&lt;http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLatLonLatLon&gt;</a>  ( lat1, lon1, lat2, lon2, [  units ] ) </li>
<li><a href='http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLatLonLoc'>&lt;http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLatLonLoc&gt;</a>  ( lat, lon, loc, [  units ] ) </li>
<li><a href='http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLatLonLoc'>&lt;http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLatLonLoc&gt;</a>  ( lat, lon, loc, [  units ] ) </li>
<li><a href='http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLocLoc'>&lt;http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLocLoc&gt;</a>  ( loc1, loc2, [  units ] ) </li>
<li><a href='http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLocLoc'>&lt;http://franz.com/ns/allegrograph/5.0/geo/nd/fn#haversineLocLoc&gt;</a>  ( loc1, loc2, [  units ] ) </li>
<li><a href='http://franz.com/ns/allegrograph/5.0/geo/nd/fn#ordinateValue'>&lt;http://franz.com/ns/allegrograph/5.0/geo/nd/fn#ordinateValue&gt;</a>  ( value, name ) </li>
<li><a href='http://franz.com/ns/allegrograph/5.0/geo/nd/fn#ordinatesToValue'>&lt;http://franz.com/ns/allegrograph/5.0/geo/nd/fn#ordinatesToValue&gt;</a>  ( value, ... ) </li></ul>  </p><h4>2D Geospatial</h4><p>These functions are useful in working with the older AllegroGraph <a href="geospatial-tutorial.html">2D Geospatial</a> facilities: </p><p>
<ul>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesianDistance'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesianDistance&gt;</a>  ( p1, p2 ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesianDistanceSquared'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesianDistanceSquared&gt;</a>  ( p1, p2 ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesianX'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesianX&gt;</a>  ( point ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesianY'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesianY&gt;</a>  ( point ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversineKilometers'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversineKilometers&gt;</a>  ( p1, p2 ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversineMiles'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversineMiles&gt;</a>  ( p1, p2 ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversineRadians'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversineRadians&gt;</a>  ( p1, p2 ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/latitude'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/latitude&gt;</a>  ( point ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/longitude'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/longitude&gt;</a>  ( point ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/toPointLonLat'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/toPointLonLat&gt;</a>  ( predicate, longitude, latitude ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/toPointXY'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/toPointXY&gt;</a>  ( predicate, x, y ) </li></ul>  </p><h4>2D Geospatial (deprecated)</h4><p>These deprecated <a href="geospatial-tutorial.html">2D Geospatial</a> functions are still supported but you should change your queries to use the above functions instead. </p><p>
<ul>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesian-distance'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesian-distance&gt;</a>  ( p1, p2 ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesian-distance-squared'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesian-distance-squared&gt;</a>  ( p1, p2 ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesian-x'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesian-x&gt;</a>  ( p ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesian-y'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/cartesian-y&gt;</a>  ( p ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversine-km'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversine-km&gt;</a>  ( p1, p2 ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversine-miles'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversine-miles&gt;</a>  ( p1, p2 ) </li>
<li><a href='http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversine-r'>&lt;http://franz.com/ns/allegrograph/3.0/geospatial/fn/haversine-r&gt;</a>  ( p1, p2 ) </li></ul>  </p><h4>Social Networking (SNA) Related functions</h4><p>These functions can help when using AllegroGraph's <a href="magic-properties.html#sparql-magic-sna">SNA extensions</a>. </p><p>
<ul>
<li><a href='http://franz.com/ns/allegrograph/4.11/sna/egoGroup'>&lt;http://franz.com/ns/allegrograph/4.11/sna/egoGroup&gt;</a>  ( generator, node, depth ) </li>
<li><a href='http://franz.com/ns/allegrograph/4.11/sna/neighborCache'>&lt;http://franz.com/ns/allegrograph/4.11/sna/neighborCache&gt;</a>  ( generator, node, depth ) </li></ul>  </p><h4>Miscellaneous other functions</h4><p>These functions help connect SPARQL to various other AllegroGraph features. </p><p>
<ul>
<li><a href='http://franz.com/ns/allegrograph/fn#encodedIdId'>&lt;http://franz.com/ns/allegrograph/fn#encodedIdId&gt;</a>  ( resource ) </li></ul>  </p><a name='header2-179' id='header2-179'></a><h2>Variables</h2>
<a name="variable.:2Asparql-log-stream:2A" id="variable.:2Asparql-log-stream:2A"></a>
<a name="x:2Asparql-log-stream:2A" id="x:2Asparql-log-stream:2A"></a>
<div class="documentation variable"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">*sparql-log-stream*</span>
</div>
<span class="documentation-kind">variable</span>
</div>
<div class="documentation contents">The log stream to which SPARQL verbose output is written. 
</div>
</div>
  
<a name="variable.:2Asparql-table-width:2A" id="variable.:2Asparql-table-width:2A"></a>
<a name="x:2Asparql-table-width:2A" id="x:2Asparql-table-width:2A"></a>
<div class="documentation variable"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">*sparql-table-width*</span>
</div>
<span class="documentation-kind">variable</span>
</div>
<div class="documentation contents">This variable specifies how wide to draw the results table in characters. 
</div>
</div>
  
<a name="variable.:2Adefault-dataset-behavior:2A" id="variable.:2Adefault-dataset-behavior:2A"></a>
<a name="x:2Adefault-dataset-behavior:2A" id="x:2Adefault-dataset-behavior:2A"></a>
<div class="documentation variable"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">*default-dataset-behavior*</span>
</div>
<span class="documentation-kind">variable</span>
</div>
<div class="documentation contents"><p>Controls how SPARQL behaves when no dataset is specified. </p><p>If nil, then the default value of the defaultDatasetBehavior query property will be used. Otherwise, this value will be used. </p><p>See the defaultDatasetBehavior query option for details </p>
</div>
</div>
  
<a name="variable.:2Adataset-load-function:2A" id="variable.:2Adataset-load-function:2A"></a>
<a name="x:2Adataset-load-function:2A" id="x:2Adataset-load-function:2A"></a>
<div class="documentation variable"><div class="documentation header"><div class="doc name-and-args"><span class="hidden">X</span>
<span class="documentation-name">*dataset-load-function*</span>
</div>
<span class="documentation-kind">variable</span>
</div>
<div class="documentation contents">Set this to a function of two or three arguments, <code>(uri db &amp;optional type)</code>, to load dataset parameters before a query is executed. 
</div>
</div>
  <a name='header2-181' id='header2-181'></a><h2>Function index</h2>
<a name="function" id="function"></a>
<div class="index function">
<ul>
<li><a href="#function.associate-function-with-uri">associate-function-with-uri</a></li>
<li><a href="#function.db-run-sparql">db-run-sparql</a></li>
<li><a href="#function.default-query-engine">default-query-engine</a></li>
<li><a href="#function.get-allowed-rdf-formats">get-allowed-rdf-formats</a></li>
<li><a href="#function.get-allowed-results-formats">get-allowed-results-formats</a></li>
<li><a href="#function.get-sparql-query-engines">get-sparql-query-engines</a></li>
<li><a href="#function.parse-sparql">parse-sparql</a></li>
<li><a href="#function.print-function-uri-mappings">print-function-uri-mappings</a></li>
<li><a href="#function.run-sparql">run-sparql</a></li>
<li><a href="#function.valid-query-engines">valid-query-engines</a></li>
</ul></div> <hr/><div id="footnotes"> <h2>Footnotes</h2>
<div class="footnotes">
<ol>
<li>
<a name="fn0-2018-06-08" id="fn0-2018-06-08"></a>
Note that SPARQL 1.1 is only supported by the sparql-1.1 query engine. <a href="#fnr0-2018-06-08" class="footnoteBacklink" title="Jump back to footnote 1 in the text">&#8617;</a></li>
</ol>
</div>  </div>  </div>  <p><script> $.each($("#agmenu ul li a"), function(ignore, link) {   var anchor = $(link);   anchor.parent().on("click", function () { window.location = anchor.prop("href"); }); }); $("#agmenu").css("display", "block") </script> </p> 
</body>
</html>
